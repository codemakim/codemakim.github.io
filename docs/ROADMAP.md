# 프로젝트 장기 로드맵

## 프로젝트 비전

개발 블로그를 중심으로 한 통합 플랫폼 구축

- SEO 최적화된 랜딩 페이지
- 블로그, 습관 관리, 게임 등 다양한 기능 통합
- Supabase 기반 인증 및 데이터 관리

## 현재 상태

### 완료된 기능

- ✅ Next.js 16 + Contentlayer2 기반 블로그
- ✅ MDX 포스트 작성 및 관리
- ✅ 다크모드 지원
- ✅ 반응형 디자인
- ✅ GitHub Pages 정적 배포
- ✅ Vercel 스타일 미니멀 디자인 시스템
- ✅ 랜딩 페이지 구축 (`/`)
- ✅ 블로그 목록 페이지 (`/blog`)

### 별도 프로젝트

- Flutter 앱: `doit_everyday` (습관 관리 앱) → 웹 버전으로 업그레이드 예정

## Phase 1: 습관 관리 기능 구현 (우선순위: 최우선)

### 1.1 Supabase 인프라 구축

- **목표**: Supabase 프로젝트 설정 및 데이터베이스 구성
- **상태**: ✅ 완료
- **작업 내용**:
  1. ✅ Supabase 프로젝트 생성
  2. ✅ 환경 변수 설정
  3. ✅ 데이터베이스 테이블 생성 (5개 테이블)
  4. ✅ RLS (Row Level Security) 정책 설정
  5. ✅ user_stats 자동 생성 트리거 설정
  6. ✅ Google OAuth Provider 설정
  7. ✅ GitHub OAuth Provider 설정
- **예상 시간**: 1일
- **참고 문서**: `docs/features/habits/DATABASE.md` (전체 SQL 스크립트)

### 1.2 인증 시스템 구현 (우선순위: 최우선)

- **목표**: 사용자 로그인/회원가입 기능 구현
- **상태**: ✅ 완료
- **작업 내용**:
  1. ✅ AuthProvider 구현 (인증 상태 관리)
  2. ✅ 로그인 페이지 (`/auth/login`) - 구글/깃허브 로그인 버튼
  3. ~~회원가입 페이지~~ (소셜 로그인으로 대체)
  4. ✅ ProtectedRoute 컴포넌트 (보호된 라우트)
  5. ✅ 헤더에 톱니바퀴 아이콘 추가 (인증 상태에 따라 표시)
  6. ✅ 프로필 페이지 (`/profile`) - 로그아웃 버튼
  7. ✅ user_stats 초기화 (Database Trigger)
  8. ✅ Hydration 에러 수정
- **기술**: Supabase Auth (클라이언트 사이드, 소셜 로그인)
- **예상 시간**: 2-3일
- **참고 문서**: `docs/features/habits/AUTH.md` (상세 설계 및 코드 예시)

### 1.3 습관 등록 기능

- **목표**: 습관 생성 폼 및 저장 기능
- **상태**: ✅ 완료
- **작업 내용**:
  1. ✅ 습관 등록 페이지 (`/habits/create`)
  2. ✅ 폼 컴포넌트 (제목, 설명, 기간, 요일, 색상)
  3. ✅ 유효성 검증
  4. ✅ Supabase에 저장
  5. ✅ 중복 요청 방지 로직
  6. ✅ HabitsProvider 캐시 업데이트 (생성 후 즉시 반영)
- **예상 시간**: 2-3일
- **참고 문서**: `docs/features/habits/DESIGN.md` 섹션 3.1, 4.2

### 1.4 습관 목록 화면

- **목표**: 오늘 수행해야 할 습관 목록 표시 및 종합 달력 뷰
- **상태**: ✅ 완료 (필터/정렬은 선택사항, 향후)
- **작업 내용**:
  1. ✅ 습관 목록 페이지 (`/habits`)
  2. ✅ 습관 카드 컴포넌트
  3. ✅ 완료 체크 기능 (애니메이션 포함)
  4. ✅ 중복 요청 방지 로직
  5. ✅ Hydration 에러 수정
  6. ✅ HabitsProvider 기반 데이터 패칭 최적화
     - 습관 목록은 초기 로드 시 1회만 패칭
     - 생성/삭제 시 캐시만 업데이트 (재패칭 없음)
     - 완료 기록은 캐시 변경 시 자동 재패칭
  7. ✅ 토글 버튼 (체크 화면 ↔ 달력 뷰)
  8. ✅ 종합 달력 뷰 (모든 습관의 성공률 표시)
     - ✅ 날짜별 성공률 계산 (완료된 습관 수 / 수행해야 할 습관 수)
     - ✅ 원형 파이차트로 시각화
     - ✅ 성공률 퍼센트 표시
  9. ✅ 과거 습관 보기 기능 (`/habits/archive`)
     - ✅ 전체 습관 목록 페이지 (진행 중/시작 전/기간 지난 습관 모두 표시)
     - ✅ 통계 정보 표시 (달성률, 최대 연속 일수, 완료 일수/총 일수, 기간)
     - ✅ 종료일이 지난 습관에는 카드 상단 "완료" 라벨 표시
     - ✅ 간결한 카드 UI (완료 체크 버튼 없음)
     - ✅ 네비게이션 링크 추가 (습관 목록 ↔ 과거 습관)
  10. ⏳ 필터/정렬 기능 (선택사항, 향후)
- **예상 시간**: 3-4일 (과거 습관 보기 추가 시 +1-2일)
- **참고 문서**: `docs/features/habits/DESIGN.md` 섹션 3.2, 3.2.1, 4.2, 4.5

### 1.5 습관 상세 화면

- **목표**: 습관 상세 정보 및 통계 표시
- **상태**: ✅ 완료
- **작업 내용**:
  1. ✅ 습관 상세 페이지 (`/habits/detail?id=xxx`)
  2. ✅ 해당 습관만의 달력 뷰 (성공/실패 표시)
  3. ✅ 통계 계산 및 표시
  4. ✅ 삭제 기능 (HabitsProvider 캐시 업데이트 포함)
  5. ✅ 수정 기능 (기본 수정만: 제목, 설명, 색상)
     - ✅ 수정 페이지 (`/habits/edit?id=xxx`)
     - ✅ HabitsProvider 캐시 활용 (중복 패칭 방지)
     - ✅ 데이터 무결성 보호 (기간, 요일은 수정 불가)
  6. ✅ 버그 수정
     - ✅ 날짜 타임존 문제 해결 (날짜 비교/표시 로직 개선)
     - ✅ 모바일 날짜 입력 필드 레이아웃 수정 (카드 패딩 존중)
- **예상 시간**: 3-4일
- **참고 문서**: `docs/features/habits/DESIGN.md` 섹션 3.3, 3.4, 4.5

### 1.6 통계 및 고급 기능

- **목표**: 습관 통계 및 추가 기능 구현
- **상태**: ⏳ 부분 완료
- **작업 내용**:
  1. ✅ 통계 계산 로직 (완료율, 연속 일수 등) - HabitStats 컴포넌트 구현 완료
  2. ⏳ 통계 대시보드 (향후)
  3. ✅ 성능 최적화
     - ✅ HabitsProvider 캐시 활용 최적화
       - OverallCalendar: HabitsProvider 캐시 사용 (중복 패칭 제거)
       - detail/page.tsx: HabitsProvider 캐시 우선 사용
       - HabitCalendar: 로직 개선 (useCallback, dependency 최적화)
     - ✅ 모든 습관 데이터 변경 액션에서 캐시 자동 갱신 확인
  4. ⏳ 오프라인 지원 (향후)
- **예상 시간**: 2-3일
- **참고 문서**: `docs/features/habits/DESIGN.md` 섹션 3.5, 5.3

## Phase 2: 블로그 통합 및 개선 (우선순위: 중간)

### 2.1 블로그와 습관 관리 통합

- **목표**: 네비게이션 통합 및 사용자 경험 개선
- **작업 내용**:
  1. 공통 헤더/네비게이션
  2. 사용자 프로필 메뉴
  3. 랜딩 페이지에서 습관 관리 접근 개선
- **예상 시간**: 1-2일

### 2.2 블로그 기능 개선

- **목표**: 블로그 기능 추가 및 개선
- **작업 내용**:
  1. 시리즈 기능 개선
  2. 검색 기능 개선
  3. 태그 시스템 개선
- **예상 시간**: TBD

## Phase 3: 게임 코너 (우선순위: 높음)

### 3.1 게임 코너 기본 구현

- **목표**: 로그인 없이 즐길 수 있는 웹 게임 5종 구현
- **상태**: ⏳ 설계 완료, 구현 대기
- **작업 내용**:
  1. ⏳ 랜딩 페이지 레이아웃 변경 (3타일 균등 배치)
  2. ⏳ 게임 공통 컴포넌트 (GameLayout, GameCard, useGameAudio)
  3. ⏳ 게임 목록 페이지 (`/games`)
  4. ⏳ 2048 게임 (`/games/2048`)
  5. ⏳ 스네이크 게임 (`/games/snake`)
  6. ⏳ 지뢰찾기 게임 (`/games/minesweeper`)
  7. ⏳ 메모리 카드 게임 (`/games/memory`)
  8. ⏳ 블록 드롭 게임 (`/games/block-drop`) - 테트리스 메카닉, 독자적 비주얼
- **인증**: 로그인 불필요, 점수는 localStorage에 저장
- **기술**: React + CSS Grid/Canvas/SVG + Web Audio API (외부 에셋 없음)
- **예상 시간**: 10-15시간
- **참고 문서**: `docs/features/games/DESIGN.md` (전체 설계)

### 3.2 게임 기록 저장 (향후)

- **목표**: 로그인 시 Supabase에 게임 기록 저장
- **상태**: 대기
- **기술**: HabitsProvider 캐싱 패턴 적용 (Map 기반 메모리 캐시)
- **참고**: `docs/features/games/DESIGN.md` 섹션 9 (인증 전략)

## Phase 4: 추가 기능 (우선순위: 낮음)

### 4.1 기타 기능

- 알림 기능
- 습관 공유 기능
- 커뮤니티 기능

## 기술 스택

### 프론트엔드

- Next.js 16 (App Router)
- React 19
- TypeScript
- Tailwind CSS 4
- Contentlayer2 (블로그)

### 백엔드/인증

- Supabase (Auth, Database, Storage)
- PostgreSQL (Supabase)

### 배포

- GitHub Pages (정적 사이트)
- 또는 Vercel (SSR 지원 시)

## 우선순위 매트릭스

| Phase | 작업                 | 우선순위 | 예상 시간 | 의존성   | 상태         |
| ----- | -------------------- | -------- | --------- | -------- | ------------ |
| 1.1   | Supabase 인프라 구축 | 최우선   | 1일       | 없음     | ✅ 완료      |
| 1.2   | 인증 시스템 구현     | 최우선   | 2-3일     | 1.1      | ✅ 완료      |
| 1.3   | 습관 등록 기능       | 최우선   | 2-3일     | 1.2      | ✅ 완료      |
| 1.4   | 습관 목록 화면       | 최우선   | 2-3일     | 1.2      | ✅ 완료      |
| 1.5   | 습관 상세 화면       | 최우선   | 3-4일     | 1.3, 1.4 | ✅ 완료      |
| 1.6   | 통계 및 고급 기능    | 높음     | 2-3일     | 1.5      | ⏳ 부분 완료 |
| 2.1   | 블로그 통합          | 중간     | 1-2일     | 1.4      | 대기         |
| 2.2   | 블로그 개선          | 중간     | TBD       | 없음     | 대기         |
| 3.1   | 게임 코너 기본 구현  | 높음     | 10-15시간 | 없음     | ⏳ 설계 완료 |
| 3.2   | 게임 기록 저장       | 중간     | TBD       | 3.1      | 대기         |
| 4.x   | 추가 기능            | 낮음     | TBD       | -        | 대기         |

## 다음 단계

1. **현재 진행**: Phase 3.1 게임 코너 기본 구현
   - 설계 문서 완료 (`docs/features/games/DESIGN.md`)
   - 구현 대기 (승인 후 진행)
2. **이후 진행**: Phase 1.6 통계 및 고급 기능 / Phase 2.1 블로그 통합
3. **완료된 작업**:
   - Phase 1.1 (Supabase 인프라)
   - Phase 1.2 (인증 시스템)
   - Phase 1.3 (습관 등록 기능)
   - Phase 1.4 (완료: 기본 목록, 토글 버튼, 종합 달력 뷰, 과거 습관 보기, 데이터 패칭 최적화)
   - Phase 1.5 (완료: 상세 페이지, 달력, 통계, 삭제, 수정 기능, 삭제 확인 모달)
   - Phase 1.6 (부분 완료: 통계 계산 로직, 성능 최적화)

## 참고 문서

- **프로젝트 아키텍처**: `docs/ARCHITECTURE.md` - 코드 구조, 데이터 흐름, 주요 패턴
- **습관 관리 설계**: `docs/features/habits/DESIGN.md` - 기능 스펙, 화면 설계
- **데이터베이스 설계**: `docs/features/habits/DATABASE.md` - 테이블 구조, RLS 정책, SQL 스크립트
- **인증 시스템 설계**: `docs/features/habits/AUTH.md` - 인증 플로우, 컴포넌트 구조
- **문서 인덱스**: `docs/README.md` - 전체 문서 구조 및 빠른 참조

## 주의사항

### 정적 빌드 제약

- `output: 'export'` 사용 중
- Next.js Middleware 사용 불가
- 서버 사이드 인증 체크 불가
- **해결책**: 클라이언트 사이드 인증만 사용, Supabase RLS로 데이터 보안 보장

### 인증 전략

- **인증 필요**: 습관 관리 기능 (`/habits/*`)
- **인증 불필요**: 블로그 (`/blog`, `/blog/[slug]`), 랜딩 페이지 (`/`)
- **인증 방식**: Supabase Auth (클라이언트 사이드)
- **보호된 라우트**: 클라이언트 컴포넌트로 구현
