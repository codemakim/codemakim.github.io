---
alwaysApply: true
---

# Next.js 블로그 프로젝트 AI 지침

## 프로젝트 개요

- Next.js 16 + Contentlayer2 + MDX 블로그
- Tailwind CSS 4 + Typography, Geist 폰트
- GitHub Pages 정적 배포 (`output: 'export'`)
- TypeScript 엄격 모드, 다크모드 지원

> **상세 아키텍처**: `docs/ARCHITECTURE.md` 참조  
> **프로젝트 컨텍스트**: `.cursor/rules/project-context.mdc` 참조

## 핵심 규칙

- 서버 컴포넌트 기본, 클라이언트는 필요시만 `"use client"`
- MDX frontmatter: `title`(필수), `date`(필수), `description`, `tags`
- 다크모드 필수: 모든 색상에 `dark:` 클래스 추가
- 모바일 우선 반응형, `max-w-4xl mx-auto px-4` 레이아웃

## 블로그 말투 규칙 (필수 준수)

### 기본 말투

- **"~한다" 체 사용**: 존댓말("~합니다") 대신 "~한다" 체 사용
  - ✅ 올바른 예: "React는 트리를 사용하여 컴포넌트와 모듈 간의 관계를 모델링한다."
  - ❌ 잘못된 예: "React는 트리를 사용하여 컴포넌트와 모듈 간의 관계를 모델링합니다."

### 설명 스타일

1. **간결하고 명확한 설명**
   - 불필요한 수식어 제거
   - 핵심 내용만 전달
   - 예제: "렌더 트리는 컴포넌트 간의 부모-자식 관계를 나타낸다."

2. **예제 중심 설명**
   - 개념 설명 후 바로 예제 코드 제시
   - 예제 코드에 주석으로 설명 추가 가능
   - 실제 동작하는 코드 예시 제공

3. **표를 활용한 비교**
   - 두 개념 비교 시 표 사용
   - 용어 설명 시 표 활용
   - 예제: "렌더 트리 vs 모듈 의존성 트리" 비교 표

4. **객관적이고 기술적인 톤**
   - 주관적 표현("~라고 생각한다", "~같다") 지양
   - 사실 기반 설명
   - 기술 용어 정확히 사용

### 금지 표현

- ❌ "~합니다", "~입니다", "~하세요", "~됩니다" (모든 존댓말)
- ❌ "~라고 생각한다", "~같다" (주관적 표현)
- ❌ "현대적인", "풍부한" (불필요한 수식어)
- ❌ "~해보세요", "~해보자" (명령형/권유형)
- ❌ "~해주세요", "~하십시오" (정중한 명령형)
- ❌ 느낌표, 쌍 따옴표, 이모지 남발 금지

### 참고 예시

```markdown
## 트리 구조란?

React는 트리를 사용하여 컴포넌트와 모듈 간의 관계를 모델링한다.

트리 개념:

- 루트 (Root): 최상위 노드
- 부모/자식 관계: 컴포넌트 포함 관계
- 형제 (Sibling): 같은 부모를 가진 노드
- 리프 (Leaf): 자식이 없는 노드

### 1. 렌더 트리 (Render Tree)

렌더 트리는 컴포넌트 간의 부모-자식 관계를 나타낸다.
React가 실제로 컴포넌트를 렌더링하는 순서와 구조를 보여준다.
```

## 주요 패턴

### Contentlayer 데이터

```typescript
import { allPosts } from "contentlayer/generated";
const posts = allPosts.sort(
  (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime(),
);
const post = allPosts.find((post) => post.slug === slug);
```

### MDX Frontmatter 예시

```yaml
---
title: "포스트 제목" # 필수
date: "2025-09-15" # 필수
description: "포스트 설명" # 선택
tags: ["Next.js", "블로그"] # 선택
---
```

### 스타일링 패턴

- 제목: `text-3xl font-bold` (홈), `text-4xl font-bold` (포스트)
- 본문: `prose` 클래스 (@tailwindcss/typography)
- 태그: `text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200`
- 색상: `bg-white dark:bg-gray-900`, `text-gray-900 dark:text-white`

### 모바일 UX 규칙 (중요!)

- **Sticky 헤더**: 데스크톱만 고정, 모바일은 일반 스크롤
  - ✅ 올바른 예: `className="header md:sticky md:top-0 z-50"`
  - ❌ 잘못된 예: `className="header sticky top-0 z-50"`
- **이유**: 모바일에서 sticky 헤더가 화면의 30% 이상을 차지하면 콘텐츠 읽기 불편
- **적용 위치**: 모든 페이지 헤더 (홈페이지, 포스트 상세 페이지 등)

### 스크롤 반응형 헤더 패턴

**⚠️ 핵심**: `.app-wrapper`의 `scrollTop` 사용 (window.scrollY 아님!)

- 이유: 프로젝트의 스크롤 컨테이너가 `.app-wrapper`이기 때문
- 이벤트도 `.app-wrapper`에 등록해야 작동함

## 빌드 & 배포

```bash
npm run dev    # 개발 서버 (Turbopack)
npm run build  # 정적 빌드 (GitHub Pages용)
```

- `output: 'export'`, `trailingSlash: true` 설정 필수
- `out/` 디렉토리에 정적 파일 생성

## 개발 워크플로우 (필수 준수)

### 1단계: 계획 수립 및 승인

- 모든 개발 요청 시 먼저 **상세한 계획**을 제시
- **기능 요구사항 분석** 및 **목표 명시**
- **디렉토리 구조** 및 **파일 배치 전략** 설명
- **각 파일의 역할과 생성 이유** 상세 설명
- **컴포넌트 간 관계도** 및 **데이터 흐름** 명시
- **기술 스택** 및 **라이브러리 선택 근거** 설명
- **예상 작업 시간** 및 **난이도** 평가
- **사용자 승인 후** 다음 단계 진행

### 2단계: 테스트 코드 작성 및 확인

- 실제 구현 전 **테스트 코드 먼저 작성**
- Jest + React Testing Library 사용
- **테스트 시나리오와 예상 결과** 설명
- **사용자 확인 후** 구현 단계로 진행

### 3단계: 구현 및 최종 확인

- 테스트를 통과하는 **실제 코드 구현**
- 구현된 **코드의 핵심 로직** 설명
- **다음 작업이나 개선사항** 제안
- **사용자 최종 승인** 요청

### 승인 요청 규칙

- 각 단계마다 반드시 **"다음 단계로 진행해도 될까요?"** 질문
- 사용자가 **명시적으로 승인**하기 전까지 대기
- 중간에 **수정 요청**이 있으면 해당 단계부터 재시작

## 스타일링 규칙 (중요!)

### 모바일 최적화

1. **코드블록**: 모바일에서만 좌우 여백 제거

   ```css
   @media (max-width: 768px) {
     .prose pre {
       margin-left: -1rem;
       width: calc(100% + 2rem);
     }
   }
   ```

2. **PWA 설정**: 복잡한 설정보다 기본 설정 유지
   - `statusBarStyle: "black-translucent"`만으로 충분
   - Safe Area 조작 시 콘텐츠 가려짐 주의

### 스타일 수정 시 체크리스트

- [ ] 라이트/다크모드 모두 확인했는가?
- [ ] 모바일/데스크톱 반응형 확인했는가?
- [ ] 기존 기능에 영향 없이 적용했는가?

### CSS 모듈화 규칙

1. **파일 구조**: CSS가 500줄 이상이면 모듈화 고려

   ```text
   src/app/styles/
   ├── base.css          # 기본 스타일 + 배경
   ├── mobile.css        # 모바일 최적화
   └── components.css    # 컴포넌트별 스타일
   ```

2. **모듈화 시 주의사항**:
   - 기존 파일 백업 후 분리 작업
   - 누락된 스타일 체크 (배경, 헤더, 태그 등)
   - 빌드 테스트로 검증
   - 임시/백업 파일 정리

3. **스타일 누락 방지**:
   - 배경 그라데이션: 라이트/다크모드
   - 제목 스타일: Tailwind 클래스 확인

## 태그 관리 규칙

### 태그 중복 방지 원칙

1. **기존 태그 활용 우선**: 새로운 태그 생성 전 기존 태그 확인
2. **태그 빈도 체크**: 1개 포스트에만 사용된 태그는 기존 태그로 대체 고려
3. **카테고리별 태그 체계**:
   - 기술: `React`, `Next.js`, `JavaScript`, `TypeScript`, `Vue`, `Flutter`
   - 난이도: `초급`, `중급`, `고급`
   - 분야: `프론트엔드`, `백엔드`, `Testing`, `성능`
   - 프로젝트: `Portfolio`, `학습`
   - 기타: `Math`, `Spring`, `Java`

4. **새 태그 생성 기준**:
   - 기존 태그로 표현 불가능한 고유한 개념
   - 향후 3개 이상 포스트에서 사용 예정
   - 명확하고 구체적인 의미

## 개발 워크플로우 (필수 준수)

### 1단계: TypeScript 오류 확인 및 수정

- **모든 개발 완료 후** TypeScript 오류 먼저 확인
- `npm run build` 또는 IDE에서 타입 오류 체크
- **오류 수정 완료 후** 빌드/배포 작업 진행
- 타입 오류가 있으면 빌드 실패하므로 반드시 선행 작업

### 2단계: 빌드 및 배포

- TypeScript 오류 해결 후 빌드 실행
- 빌드 성공 확인 후 배포 진행

## 금지사항

- frontmatter에서 title, date 누락
- 다크모드 클래스 (`dark:`) 생략
- 클라이언트 컴포넌트 남용
- **사용자 승인 없이 다음 단계 진행**
- **계획 없이 바로 코드 작성**
- **테스트 코드 생략**
- **복잡한 PWA 설정으로 인한 부작용**
- **CSS 모듈화 시 백업 없이 작업**
- **임시 파일 정리하지 않고 방치**
- **스타일 누락 체크 없이 빌드**
- **태그 중복 생성으로 인한 분류 체계 혼란**
- **TypeScript 오류 확인 없이 빌드/배포 진행**
