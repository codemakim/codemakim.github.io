---
alwaysApply: true
---

# 프로젝트 컨텍스트 요약

## 프로젝트 개요

Next.js 16 기반 개발 블로그 + 습관 관리 + 게임 코너 통합 플랫폼. GitHub Pages 정적 배포, Supabase 백엔드.

## 핵심 아키텍처

### 데이터 흐름

- **HabitsProvider**: 전역 습관 캐시 (`Map<string, Habit>`)
- **useHabits**: 오늘 습관 필터링 (캐시에서 가져와서 필터링)
- **컴포넌트**: HabitsProvider 캐시 사용 필수, 직접 DB 호출 금지

### 캐싱 전략

- 습관 데이터: HabitsProvider 메모리 캐시 (CRUD 시 자동 갱신)
- habit_records: 캐싱하지 않음 (통계 계산 시에만 패칭)

### 날짜 처리

- **YYYY-MM-DD 문자열 직접 사용** (타임존 문제 방지)
- `dateUtils.ts`의 `formatDateToYYYYMMDD`, `compareDateStrings` 사용
- `Date` 객체 비교 금지

## 주요 파일 경로

### 습관 관리

- `src/app/components/habits/HabitsProvider.tsx`: 전역 캐시 관리 (핵심)
- `src/app/components/habits/useHabits.ts`: 오늘 습관 필터링
- `src/app/lib/dateUtils.ts`: 날짜 유틸리티
- `src/app/lib/utils/habitStats.ts`: 통계 계산 유틸리티

### 게임 코너

### 게임 코너

- `src/app/games/`: 게임 페이지 (5종: 2048, snake, minesweeper, memory, block-drop)
- `src/app/components/games/`: 게임 공통 컴포넌트 (GameLayout, GameCard, useGameAudio)
- `src/app/lib/games/`: 게임 타입 및 상수

## 최근 변경사항

- 습관 관리 Phase 1 완료 (등록, 목록, 상세, 수정, 삭제, 아카이브)
- HabitsProvider 캐시 최적화 완료 (중복 패칭 제거)
- 통계 계산 로직 유틸리티화 완료
- 헤더 리팩토링 완료 (PageHeader 컴포넌트)
- 게임 코너 설계 완료 (Phase 3.1, 구현 대기)

## 주의사항

- 습관 데이터는 HabitsProvider 캐시에서만 가져오기
- 날짜는 항상 YYYY-MM-DD 문자열로 처리
- 스타일 수정 시 다크모드(`dark:`) 필수 확인
- 모바일 반응형 확인 (`md:` 브레이크포인트)
- 게임 코너: 로그인 불필요, localStorage로 점수 저장, 외부 에셋 없이 구현
- 향후 Supabase 연동 시 HabitsProvider 캐싱 패턴 동일 적용

## 참고 문서

- **아키텍처**: `docs/ARCHITECTURE.md` - 코드 구조, 데이터 흐름, 주요 패턴 (코드 찾기 필수)
- **습관 설계**: `docs/features/habits/DESIGN.md` - 기능 스펙, 화면 설계
- **게임 설계**: `docs/features/games/DESIGN.md` - 게임 코너 전체 설계 (5종 게임 상세 스펙)
- **데이터베이스**: `docs/features/habits/DATABASE.md` - 테이블 구조, SQL 스크립트
- **로드맵**: `docs/ROADMAP.md` - 프로젝트 진행 상황

## 코드 찾기 가이드

작업 시 다음 순서로 참조:

1. **아키텍처 문서** (`docs/ARCHITECTURE.md`) - 디렉토리 구조, 데이터 흐름, 핵심 파일 확인
2. **기능 설계 문서** - 기능 스펙 확인
   - 습관: `docs/features/habits/DESIGN.md`
   - 게임: `docs/features/games/DESIGN.md`
3. **실제 코드** - 아키텍처 문서의 파일 경로 참조하여 코드 확인
