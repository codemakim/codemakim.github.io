---
title: "[React Router 5/9] React Router - Router Hooks"
date: "2025-08-19"
description: "useParams, useSearchParams, useLocation, useNavigate 활용"
tags: ["React", "고급", "프론트엔드"]
series: "React 라이브러리"
seriesOrder: 9
---

# React Router 가이드 - Router Hooks

> React Router v6를 기반으로 한 라우팅 학습 자료  
> 출처: [React Router Documentation](https://reactrouter.com/)

---

## Router Hooks

Router hooks는 라우터가 가진 “현재 위치 정보”와 “이동 기능”을 컴포넌트에서 읽고 쓰기 위한 API다.

앞선 글에서 `useNavigate()`는 이미 깊게 다뤘다. 이 글은 `useLocation`, `useParams`, `useSearchParams`, `useMatch`, `useRoutes`를 중심으로 정리한다.

---

## 1. `useLocation()`: 현재 위치의 단일 진실 소스

`useLocation()`은 현재 URL을 구조화해서 제공한다.

- `pathname`: `/posts/42`
- `search`: `?tag=react&page=2`
- `hash`: `#section-1`
- `state`: `navigate(path, { state })`로 전달한 값

```tsx
import { useLocation } from "react-router-dom";

export default function DebugLocation() {
  const location = useLocation();

  return (
    <pre>
      {JSON.stringify(
        {
          pathname: location.pathname,
          search: location.search,
          hash: location.hash,
          state: location.state,
        },
        null,
        2
      )}
    </pre>
  );
}
```

### 실무 포인트: `location.state`는 영속 저장소가 아니다

`state`는 히스토리 엔트리에 붙는 값이다. 새로고침, 새 탭 열기, 직접 URL 입력 같은 케이스에서는 기대대로 존재하지 않을 수 있다.

- 반드시 존재해야 하는 값: URL(파라미터/쿼리) 또는 서버/스토어에 둔다.
- 있으면 좋은 값: `state`로 전달한다. 예: “어떤 버튼을 눌러 들어왔는지” 같은 보조 정보

---

## 2. `useParams()`: URL 세그먼트를 변수로 읽는다

동적 라우트(`/posts/:postId`)의 파라미터를 읽는다. 값은 항상 문자열이다.

```tsx
import { useParams } from "react-router-dom";

export default function PostDetailPage() {
  const { postId } = useParams();

  if (!postId) return <div>잘못된 접근이다.</div>;
  return <div>postId: {postId}</div>;
}
```

실무에서는 파라미터 형식 검증을 빠르게 한다. 숫자 ID면 숫자로 파싱하고, 실패하면 404 또는 목록으로 보낸다.

---

## 3. `useSearchParams()`: URL 쿼리를 상태로 다룬다

필터/정렬/페이지네이션은 쿼리 스트링이 가장 자연스러운 저장소다. 새로고침과 링크 공유가 동시에 된다.

```tsx
import { useSearchParams } from "react-router-dom";

export default function PostsPage() {
  const [searchParams, setSearchParams] = useSearchParams();

  const tag = searchParams.get("tag") ?? "all";
  const page = Number(searchParams.get("page") ?? "1");

  function goNext() {
    setSearchParams((prev) => {
      // prev는 undefined가 아니라 현재 URLSearchParams이다.
      // 쿼리가 비어 있어도 prev는 빈 URLSearchParams로 들어온다.
      const next = new URLSearchParams(prev);

      // page를 바깥 스코프에서 캡처하면 stale 값이 될 수 있다.
      // 그래서 prev(next)에서 다시 읽어서 증가시킨다.
      const currentPage = Number(next.get("page") ?? "1");
      next.set("page", String((Number.isFinite(currentPage) ? currentPage : 1) + 1));
      return next;
    });
  }

  return (
    <div>
      <div>tag: {tag}</div>
      <div>page: {Number.isFinite(page) ? page : 1}</div>
      <button onClick={goNext}>next</button>
    </div>
  );
}
```

### 실무 포인트: `setSearchParams((prev) => prev.set(...) )`는 피한다

`URLSearchParams`는 mutable이다. `prev`를 직접 변경하면 의도가 흐려지고, 일부 구현에서는 예기치 않은 결과가 나온다.

- 안전한 방식: `new URLSearchParams(prev)`로 복사한 뒤 수정해 반환한다.

---

## 4. `useMatch()`: “이 경로 패턴에 현재 URL이 매칭되는가”

메뉴 하이라이트, 조건부 렌더링, 특정 섹션에서만 동작하는 로직에 쓴다.

```tsx
import { useMatch } from "react-router-dom";

export default function AdminOnlyBadge() {
  const isAdminArea = Boolean(useMatch("/admin/*"));
  if (!isAdminArea) return null;
  return <div>admin area</div>;
}
```

`NavLink`로 해결되는 경우가 많다. `useMatch`는 “링크가 아니라 로직이 필요할 때” 쓰는 편이 적절하다.

---

## 5. `useRoutes()`: 라우트를 객체로 구성한다

라우트가 커지면 JSX로 중첩을 계속 쓰기보다, 라우트 정의를 별도 파일로 분리하고 재사용하는 편이 낫다.

```tsx
import { useRoutes } from "react-router-dom";

function AppRoutes() {
  return useRoutes([
    { path: "/", element: <div>home</div> },
    { path: "/about", element: <div>about</div> },
    {
      path: "/dashboard",
      element: <div>layout</div>,
      children: [
        { index: true, element: <div>overview</div> },
        { path: "settings", element: <div>settings</div> },
      ],
    },
  ]);
}
```

실무에서는 “라우트 정의 파일”을 중심으로 접근 제어, 코드 스플리팅, breadcrumb 메타 같은 관심사를 모으는 설계가 많이 쓰인다.

### Vue Router와 비교

```javascript
// Vue Router
import { useRouter } from "vue-router";
const router = useRouter();
// 네비게이션
router.push("/about");
router.push({ path: "/user", query: { id: 123 } });
router.replace("/login");
router.go(-1);
```

```jsx
// React Router
import { useNavigate } from "react-router-dom";
const navigate = useNavigate();
// 네비게이션
navigate("/about");
navigate("/user?id=123");
navigate("/login", { replace: true });
navigate(-1);
```

---
