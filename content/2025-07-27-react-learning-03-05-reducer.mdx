---
title: "📚 [React 기초 3-5/8] Reducer로 State 로직 추출하기"
date: "2025-07-27"
description: "useReducer Hook을 사용해 복잡한 State 로직을 관리하는 방법을 학습합니다"
tags: ["React", "학습", "Vue", "초급", "프론트엔드"]
series: "React 기초"
seriesOrder: 23
---

# React 학습 가이드 - Reducer로 State 로직 추출하기

> React 공식 문서를 기반으로 한 학습 자료  
> 원문: [Managing State - React](https://react.dev/learn/managing-state)

---

## Reducer로 State 로직 추출하기

### Reducer가 필요한 이유

많은 이벤트 핸들러에 걸쳐 state 업데이트가 분산되면 복잡해집니다.

```jsx
// ❌ 복잡함: 여러 핸들러에 분산된 state 업데이트
function TaskApp() {
  const [tasks, setTasks] = useState(initialTasks);

  function handleAddTask(text) {
    setTasks([...tasks, {
      id: nextId++,
      text: text,
      done: false
    }]);
  }

  function handleChangeTask(task) {
    setTasks(tasks.map(t => {
      if (t.id === task.id) {
        return task;
      } else {
        return t;
      }
    }));
  }

  function handleDeleteTask(taskId) {
    setTasks(tasks.filter(t => t.id !== taskId));
  }
  
  // 핸들러가 너무 많음...
}
```

**Reducer로 통합:**

```jsx
// ✅ 간결함: 모든 업데이트 로직을 reducer에 통합
function TaskApp() {
  const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);

  function handleAddTask(text) {
    dispatch({ type: 'added', id: nextId++, text: text });
  }

  function handleChangeTask(task) {
    dispatch({ type: 'changed', task: task });
  }

  function handleDeleteTask(taskId) {
    dispatch({ type: 'deleted', id: taskId });
  }
}
```

### useState에서 useReducer로 마이그레이션

#### 1단계: dispatch 액션으로 변경

```jsx
// 이전: setState 직접 호출
function handleAddTask(text) {
  setTasks([...tasks, { id: nextId++, text: text, done: false }]);
}

// 이후: dispatch로 액션 전달
function handleAddTask(text) {
  dispatch({
    type: 'added',
    id: nextId++,
    text: text,
  });
}
```

#### 2단계: reducer 함수 작성

```jsx
function tasksReducer(tasks, action) {
  switch (action.type) {
    case 'added': {
      return [...tasks, {
        id: action.id,
        text: action.text,
        done: false
      }];
    }
    case 'changed': {
      return tasks.map(t => {
        if (t.id === action.task.id) {
          return action.task;
        } else {
          return t;
        }
      });
    }
    case 'deleted': {
      return tasks.filter(t => t.id !== action.id);
    }
    default: {
      throw Error('Unknown action: ' + action.type);
    }
  }
}
```

#### 3단계: useReducer 사용

```jsx
import { useReducer } from 'react';

function TaskApp() {
  const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);
  
  // ...
}
```

### Reducer 작성 팁

#### 1. **Reducer는 순수해야 합니다**

```jsx
// ❌ 나쁨: 부작용
function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      state.count++;  // 돌연변이!
      return state;
  }
}

// ✅ 좋음: 새 객체 반환
function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      return { ...state, count: state.count + 1 };
  }
}
```

#### 2. **각 액션은 단일 사용자 상호작용을 설명합니다**

```jsx
// ❌ 나쁨: 여러 작업을 하나의 액션으로
dispatch({ type: 'update_everything', newData });

// ✅ 좋음: 명확한 의도
dispatch({ type: 'user_logged_in', userId: 123 });
dispatch({ type: 'profile_updated', profile: newProfile });
```

### 실전 예제: 할 일 앱

```jsx
import { useReducer } from 'react';

function tasksReducer(tasks, action) {
  switch (action.type) {
    case 'added': {
      return [...tasks, {
        id: action.id,
        text: action.text,
        done: false
      }];
    }
    case 'changed': {
      return tasks.map(t => {
        if (t.id === action.task.id) {
          return action.task;
        }
        return t;
      });
    }
    case 'deleted': {
      return tasks.filter(t => t.id !== action.id);
    }
    default: {
      throw Error('Unknown action: ' + action.type);
    }
  }
}

let nextId = 3;
const initialTasks = [
  { id: 0, text: 'Visit Kafka Museum', done: true },
  { id: 1, text: 'Watch a puppet show', done: false },
  { id: 2, text: 'Lennon Wall pic', done: false }
];

export default function TaskApp() {
  const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);

  function handleAddTask(text) {
    dispatch({
      type: 'added',
      id: nextId++,
      text: text,
    });
  }

  function handleChangeTask(task) {
    dispatch({
      type: 'changed',
      task: task
    });
  }

  function handleDeleteTask(taskId) {
    dispatch({
      type: 'deleted',
      id: taskId
    });
  }

  return (
    <>
      <h1>Prague itinerary</h1>
      <AddTask onAddTask={handleAddTask} />
      <TaskList
        tasks={tasks}
        onChangeTask={handleChangeTask}
        onDeleteTask={handleDeleteTask}
      />
    </>
  );
}
```

### Immer로 간결한 Reducer

```bash
npm install use-immer
```

```jsx
import { useImmerReducer } from 'use-immer';

function tasksReducer(draft, action) {
  switch (action.type) {
    case 'added': {
      draft.push({
        id: action.id,
        text: action.text,
        done: false
      });
      break;
    }
    case 'changed': {
      const task = draft.find(t => t.id === action.task.id);
      task.text = action.task.text;
      task.done = action.task.done;
      break;
    }
    case 'deleted': {
      return draft.filter(t => t.id !== action.id);
    }
    default: {
      throw Error('Unknown action: ' + action.type);
    }
  }
}

export default function TaskApp() {
  const [tasks, dispatch] = useImmerReducer(tasksReducer, initialTasks);
  // ...
}
```

### Vue와 비교

Vue에서는 Pinia나 Vuex를 사용하여 유사한 패턴을 구현합니다:

```javascript
// Vue: Pinia store
import { defineStore } from 'pinia'

export const useTaskStore = defineStore('tasks', {
  state: () => ({
    tasks: []
  }),
  actions: {
    addTask(text) {
      this.tasks.push({ id: nextId++, text, done: false })
    },
    changeTask(task) {
      const index = this.tasks.findIndex(t => t.id === task.id)
      if (index !== -1) {
        this.tasks[index] = task
      }
    },
    deleteTask(taskId) {
      this.tasks = this.tasks.filter(t => t.id !== taskId)
    }
  }
})
```

---

## 다음 단계

이제 Reducer를 이해했으니, 다음 포스트에서는 **Context로 데이터 깊이 전달하기**를 학습합니다.

**배울 내용:**
- Prop Drilling 문제 해결
- Context API 사용법
- Context와 Reducer 결합

---

**작성일**: 2025-10-11  
**출처**: [React Official Documentation](https://react.dev/learn/managing-state)  
**대상**: React 초급 학습자
