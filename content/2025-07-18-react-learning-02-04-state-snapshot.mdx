---
title: "📚 [React 기초 2-4/8] 스냅샷으로서의 State"
date: "2025-07-18"
description: "React State가 스냅샷처럼 동작하는 원리를 이해합니다"
tags: ["React", "학습", "Vue", "초급", "프론트엔드"]
series: "React 기초"
seriesOrder: 14
---

# React 학습 가이드 - 스냅샷으로서의 State

> React 공식 문서를 기반으로 한 학습 자료  
> 원문: [Adding Interactivity - React](https://react.dev/learn/adding-interactivity)

---

## 스냅샷으로서의 State

### State는 스냅샷처럼 동작합니다

```jsx
import { useState } from 'react';

export default function Counter() {
  const [number, setNumber] = useState(0);

  return (
    <>
      <h1>{number}</h1>
      <button onClick={() => {
        setNumber(number + 1);
        setNumber(number + 1);
        setNumber(number + 1);
      }}>+3</button>
    </>
  );
}
```

**예상:** 버튼 클릭 → `number`가 3 증가?  
**실제:** `number`가 1만 증가!

### 왜 이런 일이 발생하나?

**State는 스냅샷처럼 동작합니다.**

```jsx
<button onClick={() => {
  setNumber(number + 1);  // setNumber(0 + 1)
  setNumber(number + 1);  // setNumber(0 + 1)
  setNumber(number + 1);  // setNumber(0 + 1)
}}>+3</button>
```

`number`는 렌더링 시점에 `0`이므로, 세 번 모두 `setNumber(1)`을 호출합니다!

### 렌더링 시점의 State는 고정됨

```jsx
import { useState } from 'react';

export default function Counter() {
  const [number, setNumber] = useState(0);

  return (
    <>
      <h1>{number}</h1>
      <button onClick={() => {
        setNumber(number + 5);
        alert(number);  // 여전히 0!
      }}>+5</button>
    </>
  );
}
```

**`alert(number)`는 `0`을 표시합니다!**

`setNumber(number + 5)`를 호출해도, 해당 렌더링의 `number`는 여전히 `0`입니다.

### 시간에 따른 State

```jsx
import { useState } from 'react';

export default function Counter() {
  const [number, setNumber] = useState(0);

  return (
    <>
      <h1>{number}</h1>
      <button onClick={() => {
        setNumber(number + 5);
        setTimeout(() => {
          alert(number);  // 3초 후에도 0!
        }, 3000);
      }}>+5</button>
    </>
  );
}
```

**버튼 클릭 → 3초 대기 → alert는 `0` 표시**

React는 이벤트 핸들러가 실행될 때의 state 값을 "고정"합니다.

### State 업데이트 스케줄링

`setNumber(number + 5)`는 다음을 요청합니다:

1. `number`를 `0 + 5`로 설정
2. 리렌더링 스케줄

**즉각 업데이트되지 않습니다!**

### 실전 예제: 클릭 추적

```jsx
import { useState } from 'react';

export default function TrafficLight() {
  const [walk, setWalk] = useState(true);

  function handleClick() {
    setWalk(!walk);
    alert(walk ? '정지 다음입니다' : '걷기 다음입니다');
  }

  return (
    <>
      <button onClick={handleClick}>
        신호 변경
      </button>
      <h1 style={{
        color: walk ? 'darkgreen' : 'darkred'
      }}>
        {walk ? '걷기' : '정지'}
      </h1>
    </>
  );
}
```

**'걷기' 상태에서 버튼 클릭:**

1. `setWalk(false)` 호출 (다음 렌더링을 '정지'로 스케줄)
2. `alert(walk ? ...)` 실행 → `walk`는 여전히 `true`
3. "정지 다음입니다" 표시 (올바름!)

### Vue와 비교

```html
<script setup>
import { ref, nextTick } from 'vue'

const count = ref(0)

async function increment() {
  count.value++
  console.log(count.value)  // 1 (즉시 반영!)
  
  await nextTick()
  // DOM 업데이트 완료
}
</script>
```

```jsx
// React
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  
  function increment() {
    setCount(count + 1)
    console.log(count)  // 0 (스냅샷!)
  }
  
  return <button onClick={increment}>{count}</button>
}
```

**차이점:**

- Vue: `ref.value` 변경 시 즉시 반영 (반응형)
- React: State는 다음 렌더링까지 변경 안됨 (스냅샷)

---

## 다음 단계

이제 State의 스냅샷 특성을 이해했으니, 다음 포스트에서는 **State 업데이트 큐**를 학습합니다.

**배울 내용:**
- 업데이터 함수 사용법
- 여러 State 업데이트 처리
- State 업데이트 큐 동작 원리

---

**작성일**: 2025-10-11  
**출처**: [React Official Documentation](https://react.dev/learn/adding-interactivity)  
**대상**: React 초급 학습자
