---
title: "ğŸ“š [React ê¸°ì´ˆ 4-3/10] Refë¡œ DOM ì¡°ì‘í•˜ê¸°"
date: "2025-08-02"
description: "DOM ë…¸ë“œ ì ‘ê·¼ê³¼ ref ì½œë°±, forwardRef, useImperativeHandle ì‚¬ìš©ë²•"
tags: ["React", "í•™ìŠµ", "Ref", "DOM", "ì´ˆê¸‰"]
series: "React ê¸°ì´ˆ"
seriesOrder: 29
---

## Refë¡œ DOM ì¡°ì‘í•˜ê¸°

### DOM ë…¸ë“œì— ì ‘ê·¼í•˜ê¸°

ReactëŠ” ì„ ì–¸ì ìœ¼ë¡œ UIë¥¼ ê´€ë¦¬í•˜ì§€ë§Œ, ë•Œë¡œëŠ” DOMì— ì§ì ‘ ì ‘ê·¼í•´ì•¼ í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤.

ReactëŠ” ìë™ìœ¼ë¡œ DOMì„ ì—…ë°ì´íŠ¸í•˜ë¯€ë¡œ ì§ì ‘ ì¡°ì‘í•  ì¼ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” í•„ìš”í•©ë‹ˆë‹¤:

- inputì— í¬ì»¤ìŠ¤
- ìš”ì†Œë¡œ ìŠ¤í¬ë¡¤
- í¬ê¸°ì™€ ìœ„ì¹˜ ì¸¡ì •

```jsx
import { useRef } from 'react';

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

**ë‹¨ê³„:**

1. `useRef`ë¡œ ref ì„ ì–¸
2. JSXì˜ `ref` ì†ì„±ì— ì „ë‹¬
3. Reactê°€ `<input>` DOM ë…¸ë“œë¥¼ `inputRef.current`ì— ì €ì¥

### Ref ì½œë°±ìœ¼ë¡œ ref ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬

ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì—¬ëŸ¬ ìš”ì†Œì— refë¥¼ ì—°ê²°í•˜ë ¤ë©´ ì–´ë–»ê²Œ í• ê¹Œìš”? Ref ì½œë°±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```jsx
import { useRef } from 'react';

export default function CatFriends() {
  const itemsRef = useRef(null);

  function scrollToId(itemId) {
    const map = getMap();
    const node = map.get(itemId);
    node.scrollIntoView({
      behavior: 'smooth',
      block: 'nearest',
      inline: 'center'
    });
  }

  function getMap() {
    if (!itemsRef.current) {
      // ì²˜ìŒ ì‚¬ìš© ì‹œ Map ì´ˆê¸°í™”
      itemsRef.current = new Map();
    }
    return itemsRef.current;
  }

  return (
    <>
      <nav>
        <button onClick={() => scrollToId(0)}>
          Tom
        </button>
        <button onClick={() => scrollToId(5)}>
          Maru
        </button>
        <button onClick={() => scrollToId(9)}>
          Jellylorum
        </button>
      </nav>
      <div>
        <ul>
          {catList.map(cat => (
            <li
              key={cat.id}
              ref={(node) => {
                const map = getMap();
                if (node) {
                  map.set(cat.id, node);
                } else {
                  map.delete(cat.id);
                }
              }}
            >
              <img src={cat.imageUrl} alt={cat.name} />
            </li>
          ))}
        </ul>
      </div>
    </>
  );
}

const catList = [];
for (let i = 0; i < 10; i++) {
  catList.push({
    id: i,
    imageUrl: 'https://placekitten.com/250/200?image=' + i
  });
}
```

**Ref ì½œë°±:**

- `ref={(node) => { ... }}`
- Reactê°€ DOM ë…¸ë“œë¥¼ ìƒì„±í•  ë•Œ `node`ë¡œ í˜¸ì¶œ
- DOM ë…¸ë“œê°€ ì œê±°ë  ë•Œ `null`ë¡œ í˜¸ì¶œ

### ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ DOM ë…¸ë“œ ì ‘ê·¼

ê¸°ë³¸ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ëŠ” ìì‹ ì˜ DOMì„ ë…¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```jsx
// âŒ ì‘ë™í•˜ì§€ ì•ŠìŒ
function MyInput() {
  return <input />;
}

export default function Form() {
  const inputRef = useRef(null);
  return <MyInput ref={inputRef} />;  // ì—ëŸ¬!
}
```

**í•´ê²°ì±…: `forwardRef` ì‚¬ìš©**

```jsx
import { forwardRef, useRef } from 'react';

const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

### useImperativeHandleë¡œ ë…¸ì¶œë˜ëŠ” ê¸°ëŠ¥ ì œí•œ

DOM ì „ì²´ë¥¼ ë…¸ì¶œí•˜ëŠ” ëŒ€ì‹ , í•„ìš”í•œ ë©”ì„œë“œë§Œ ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
import { forwardRef, useRef, useImperativeHandle } from 'react';

const MyInput = forwardRef((props, ref) => {
  const realInputRef = useRef(null);
  
  useImperativeHandle(ref, () => ({
    // focusë§Œ ë…¸ì¶œ
    focus() {
      realInputRef.current.focus();
    },
  }));
  
  return <input {...props} ref={realInputRef} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();  // âœ… ê°€ëŠ¥
    // inputRef.current.value = 'Hi';  // âŒ ë¶ˆê°€ëŠ¥ (ë…¸ì¶œ ì•ˆë¨)
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

### Reactê°€ refë¥¼ ì²¨ë¶€í•˜ëŠ” ì‹œì 

RefëŠ” ì–¸ì œ DOM ë…¸ë“œë¥¼ ì°¸ì¡°í•˜ê²Œ ë ê¹Œìš”? Reactì˜ ë Œë”ë§ ì£¼ê¸°ë¥¼ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.

**Reactì—ì„œ ëª¨ë“  ì—…ë°ì´íŠ¸ëŠ” ë‘ ë‹¨ê³„ë¡œ ë¶„í• ë©ë‹ˆë‹¤:**

1. **ë Œë”**: Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ í™”ë©´ì— ë¬´ì—‡ì´ ìˆì–´ì•¼ í•˜ëŠ”ì§€ íŒŒì•…
2. **ì»¤ë°‹**: Reactê°€ ë³€ê²½ì‚¬í•­ì„ DOMì— ì ìš©

**Ref ì²¨ë¶€ ì‹œì :**

- **ë Œë” ì¤‘**: `ref.current = null`
- **ì»¤ë°‹ ì „**: Reactê°€ `ref.current`ë¥¼ DOM ë…¸ë“œë¡œ ì„¤ì •

### flushSyncë¡œ state ì—…ë°ì´íŠ¸ ê°•ì œ

State ì—…ë°ì´íŠ¸ê°€ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ DOMì´ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. `flushSync`ë¡œ ë™ê¸°ì  ì—…ë°ì´íŠ¸ë¥¼ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
import { useState, useRef } from 'react';
import { flushSync } from 'react-dom';

export default function TodoList() {
  const listRef = useRef(null);
  const [todos, setTodos] = useState(initialTodos);

  function handleAdd() {
    const newTodo = { id: nextId++, text: text };
    
    flushSync(() => {
      setText('');
      setTodos([...todos, newTodo]);
    });
    
    listRef.current.lastChild.scrollIntoView({
      behavior: 'smooth',
      block: 'nearest'
    });
  }

  return (
    <>
      <button onClick={handleAdd}>Add</button>
      <input value={text} onChange={e => setText(e.target.value)} />
      <ul ref={listRef}>
        {todos.map(todo => (
          <li key={todo.id}>{todo.text}</li>
        ))}
      </ul>
    </>
  );
}

let nextId = 0;
const initialTodos = [];
for (let i = 0; i < 20; i++) {
  initialTodos.push({
    id: nextId++,
    text: 'Todo #' + (i + 1)
  });
}
```

### refë¡œ DOM ì¡°ì‘ ì‹œ ëª¨ë²” ì‚¬ë¡€

**RefëŠ” íƒˆì¶œêµ¬ì…ë‹ˆë‹¤.** "React ë°–ìœ¼ë¡œ ë²—ì–´ë‚˜ì•¼" í•  ë•Œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.

**ì¢‹ì€ ì˜ˆ:**

- í¬ì»¤ìŠ¤ ê´€ë¦¬
- ìŠ¤í¬ë¡¤ ìœ„ì¹˜
- Reactê°€ ë…¸ì¶œí•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì € API í˜¸ì¶œ

**ë‚˜ìœ ì˜ˆ:**

```jsx
// âŒ ë‚˜ì¨: Reactê°€ ê´€ë¦¬í•˜ëŠ” DOM ìˆ˜ì •
const divRef = useRef(null);
divRef.current.remove();  // Reactì™€ ì¶©ëŒ!
divRef.current.appendChild(child);  // Reactê°€ í˜¼ë€ìŠ¤ëŸ¬ì›Œí•¨

// âœ… ì¢‹ìŒ: Reactê°€ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ë§Œ ìˆ˜ì •
divRef.current.scrollIntoView();
divRef.current.focus();
```

### Vueì™€ ë¹„êµ

```html
<!-- Vue: template ref -->
<script setup>
import { ref } from 'vue'

const inputRef = ref(null)

function focus() {
  inputRef.value.focus()
}
</script>

<template>
  <input ref="inputRef" />
  <button @click="focus">Focus</button>
</template>
```

```jsx
// React: useRef + ref ì†ì„±
import { useRef } from 'react'

function Form() {
  const inputRef = useRef(null)
  
  function focus() {
    inputRef.current.focus()
  }
  
  return (
    <>
      <input ref={inputRef} />
      <button onClick={focus}>Focus</button>
    </>
  )
}
```

---

**ì¶œì²˜**: [React Official Documentation](https://react.dev/learn/escape-hatches)
