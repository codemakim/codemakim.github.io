---
title: "📚 [React 기초 4-7/10] Effect에서 이벤트 분리하기"
date: "2025-08-06"
description: "Effect 재실행을 줄이기 위한 이벤트 분리 패턴"
tags: ["React", "학습", "Effect", "최적화"]
series: "React 기초"
seriesOrder: 33
---

## Effect에서 이벤트 분리하기

### 이벤트 핸들러 vs Effect

**이벤트 핸들러:**

- 특정 상호작용에 응답
- 수동으로 트리거

**Effect:**

- 동기화가 필요할 때마다 실행
- 자동으로 트리거

### 문제: Effect가 너무 자주 실행됨

```jsx
function ChatRoom({ roomId, theme }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, theme]);  // theme 변경 시에도 재연결! 😱
  // ...
}
```

### 해결: useEffectEvent (실험적)

```jsx
import { useEffect, useEffectEvent } from 'react';

function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      onConnected();
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);  // theme은 의존성 아님!
  // ...
}
```

**`useEffectEvent`:**

- Effect에서 비반응형 로직 추출
- 항상 최신 props와 state 사용
- 의존성에 포함하지 않음

### Effect Event 제한사항

- **Effect 내부에서만 호출**
- **다른 컴포넌트나 Hook에 전달 금지**

```jsx
// ❌ 잘못됨
function Timer() {
  const [count, setCount] = useState(0);

  const onTick = useEffectEvent(() => {
    setCount(count + 1);
  });

  useTimer(() => {
    onTick();  // 다른 Hook에서 호출 불가!
  }, 1000);
  // ...
}

// ✅ 올바름
function Timer() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const onTick = () => {
      setCount(count + 1);
    };

    const id = setInterval(onTick, 1000);
    return () => clearInterval(id);
  }, [count]);
  // ...
}
```

---
