---
title: "ğŸ“š [React ê¸°ì´ˆ 4/4] ê³ ê¸‰ Hook - useRef & useEffect"
date: "2025-08-04"
description: "useRef, useEffectì˜ ë™ì‘ ì›ë¦¬ì™€ ì»¤ìŠ¤í…€ Hook ì‘ì„±ë²•ì„ ë§ˆìŠ¤í„°í•©ë‹ˆë‹¤"
tags: ["React", "useRef", "useEffect", "Hook", "ì¤‘ê¸‰"]
---

# React í•™ìŠµ ê°€ì´ë“œ - íƒˆì¶œêµ¬ (Escape Hatches)

> React ê³µì‹ ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ í•™ìŠµ ìë£Œ  
> ì›ë¬¸: [Escape Hatches - React](https://react.dev/learn/escape-hatches)

---

## ğŸ“š ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [Refë¡œ ê°’ ì°¸ì¡°í•˜ê¸°](#refë¡œ-ê°’-ì°¸ì¡°í•˜ê¸°)
3. [Refë¡œ DOM ì¡°ì‘í•˜ê¸°](#refë¡œ-dom-ì¡°ì‘í•˜ê¸°)
4. [Effectë¡œ ë™ê¸°í™”í•˜ê¸°](#effectë¡œ-ë™ê¸°í™”í•˜ê¸°)
5. [Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤](#effectê°€-í•„ìš”í•˜ì§€-ì•Šì„-ìˆ˜ë„-ìˆìŠµë‹ˆë‹¤)
6. [ë°˜ì‘í˜• Effectì˜ ìƒëª…ì£¼ê¸°](#ë°˜ì‘í˜•-effectì˜-ìƒëª…ì£¼ê¸°)
7. [Effectì—ì„œ ì´ë²¤íŠ¸ ë¶„ë¦¬í•˜ê¸°](#effectì—ì„œ-ì´ë²¤íŠ¸-ë¶„ë¦¬í•˜ê¸°)
8. [Effect ì˜ì¡´ì„± ì œê±°í•˜ê¸°](#effect-ì˜ì¡´ì„±-ì œê±°í•˜ê¸°)
9. [ì»¤ìŠ¤í…€ Hookìœ¼ë¡œ ë¡œì§ ì¬ì‚¬ìš©í•˜ê¸°](#ì»¤ìŠ¤í…€-hookìœ¼ë¡œ-ë¡œì§-ì¬ì‚¬ìš©í•˜ê¸°)

---

## ê°œìš”

ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” **React ì™¸ë¶€ì˜ ì‹œìŠ¤í…œ**ì„ ì œì–´í•˜ê³  ë™ê¸°í™”í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ:**

- ë¸Œë¼ìš°ì € APIë¡œ inputì— í¬ì»¤ìŠ¤
- React ì—†ì´ ì‘ì„±ëœ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ì œì–´
- ì›ê²© ì„œë²„ì— ì—°ê²° ë° ìˆ˜ì‹ 

ì´ëŸ° "íƒˆì¶œêµ¬"ë¥¼ í†µí•´ React íŒ¨ëŸ¬ë‹¤ì„ì—ì„œ ë²—ì–´ë‚  ìˆ˜ ìˆì§€ë§Œ, ë‚¨ìš©í•˜ì§€ ë§ˆì„¸ìš”!

### ì´ ì±•í„°ì—ì„œ ë°°ìš¸ ë‚´ìš©

- âœ… ë¦¬ë Œë”ë§ ì—†ì´ ì •ë³´ "ê¸°ì–µ"í•˜ëŠ” ë°©ë²•
- âœ… Reactê°€ ê´€ë¦¬í•˜ëŠ” DOM ìš”ì†Œì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•
- âœ… ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•
- âœ… ë¶ˆí•„ìš”í•œ Effectë¥¼ ì œê±°í•˜ëŠ” ë°©ë²•
- âœ… Effectì˜ ìƒëª…ì£¼ê¸°ê°€ ì»´í¬ë„ŒíŠ¸ì™€ ë‹¤ë¥¸ ì´ìœ 
- âœ… ì¼ë¶€ ê°’ì´ Effectë¥¼ ë‹¤ì‹œ íŠ¸ë¦¬ê±°í•˜ì§€ ì•Šê²Œ í•˜ëŠ” ë°©ë²•
- âœ… Effectê°€ ì¬ì‹¤í–‰ë˜ëŠ” ë¹ˆë„ë¥¼ ì¤„ì´ëŠ” ë°©ë²•
- âœ… ì»´í¬ë„ŒíŠ¸ ê°„ì— ë¡œì§ì„ ê³µìœ í•˜ëŠ” ë°©ë²•

---

## Refë¡œ ê°’ ì°¸ì¡°í•˜ê¸°

### Stateì™€ Refì˜ ì°¨ì´

ì»´í¬ë„ŒíŠ¸ê°€ ì¼ë¶€ ì •ë³´ë¥¼ "ê¸°ì–µ"í•˜ë˜, **ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•˜ê³  ì‹¶ì§€ ì•Šì„ ë•Œ** `useRef`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```jsx
import { useRef } from 'react';

const ref = useRef(0);
```

**`useRef` ë°˜í™˜ê°’:**

```javascript
{
  current: 0  // ì´ˆê¸°ê°’
}
```

### State vs Ref ë¹„êµ

| íŠ¹ì§• | useRef | useState |
|------|--------|----------|
| **ë°˜í™˜ê°’** | `{ current: value }` | `[value, setValue]` |
| **ë³€ê²½ ì‹œ ë¦¬ë Œë”ë§** | âŒ ì•ˆí•¨ | âœ… í•¨ |
| **ë³€ê²½ ê°€ëŠ¥ (Mutable)** | âœ… ê°€ëŠ¥ (`ref.current` ìˆ˜ì •) | âŒ ë¶ˆê°€ (setter í•¨ìˆ˜ ì‚¬ìš©) |
| **ë Œë”ë§ ì¤‘ ì½ê¸°/ì“°ê¸°** | âŒ ë¶ˆê°€ | âœ… ê°€ëŠ¥ |

### ì˜ˆì œ: ìŠ¤í†±ì›Œì¹˜

```jsx
import { useState, useRef } from 'react';

export default function Stopwatch() {
  const [startTime, setStartTime] = useState(null);
  const [now, setNow] = useState(null);
  const intervalRef = useRef(null);

  function handleStart() {
    setStartTime(Date.now());
    setNow(Date.now());

    clearInterval(intervalRef.current);
    intervalRef.current = setInterval(() => {
      setNow(Date.now());
    }, 10);
  }

  function handleStop() {
    clearInterval(intervalRef.current);
  }

  let secondsPassed = 0;
  if (startTime != null && now != null) {
    secondsPassed = (now - startTime) / 1000;
  }

  return (
    <>
      <h1>Time passed: {secondsPassed.toFixed(3)}</h1>
      <button onClick={handleStart}>
        Start
      </button>
      <button onClick={handleStop}>
        Stop
      </button>
    </>
  );
}
```

**`intervalRef` ì‚¬ìš© ì´ìœ :**

- `setInterval`ì˜ IDë¥¼ ì €ì¥
- ë Œë”ë§ì— ì˜í–¥ ì£¼ì§€ ì•ŠìŒ
- `handleStop`ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥

### Ref ì‚¬ìš© ì‹œê¸°

**RefëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤:**

- timeout ID ì €ì¥
- DOM ìš”ì†Œ ì €ì¥ (ë‹¤ìŒ ì„¹ì…˜ì—ì„œ)
- JSX ê³„ì‚°ì— í•„ìš” ì—†ëŠ” ë‹¤ë¥¸ ê°ì²´ ì €ì¥

### Ref ëª¨ë²” ì‚¬ë¡€

#### 1. **Refë¥¼ íƒˆì¶œêµ¬ë¡œ ì·¨ê¸‰í•˜ì„¸ìš”**

```jsx
// âœ… ì¢‹ìŒ: ì™¸ë¶€ ì‹œìŠ¤í…œ/ë¸Œë¼ìš°ì € API
const intervalRef = useRef(null);
const videoRef = useRef(null);

// âŒ ë‚˜ì¨: Reactê°€ ê´€ë¦¬í•´ì•¼ í•  ì •ë³´
const dataRef = useRef([]);  // stateë¥¼ ì‚¬ìš©í•˜ì„¸ìš”!
```

#### 2. **ë Œë”ë§ ì¤‘ì— `ref.current` ì½ê¸°/ì“°ê¸° ê¸ˆì§€**

```jsx
// âŒ ì˜ëª»ë¨: ë Œë”ë§ ì¤‘ ref ì½ê¸°
function MyComponent() {
  const myRef = useRef(0);
  myRef.current = myRef.current + 1;  // ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥!
  return <h1>{myRef.current}</h1>;
}

// âœ… ì˜¬ë°”ë¦„: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì‚¬ìš©
function MyComponent() {
  const myRef = useRef(0);
  
  function handleClick() {
    myRef.current = myRef.current + 1;
    console.log(myRef.current);
  }
  
  return <button onClick={handleClick}>Click me</button>;
}
```

### Ref ë‚´ë¶€ ë™ì‘

**ì§ì ‘ êµ¬í˜„í•œë‹¤ë©´:**

```jsx
// Reactê°€ ë‚´ë¶€ì ìœ¼ë¡œ í•˜ëŠ” ì¼
function useRef(initialValue) {
  const [ref, unused] = useState({ current: initialValue });
  return ref;
}
```

### ì˜ˆì œ: í´ë¦­ ì¹´ìš´í„°

```jsx
import { useRef } from 'react';

export default function Counter() {
  let countRef = useRef(0);

  function handleClick() {
    // ì¦ê°€í•˜ì§€ë§Œ ë¦¬ë Œë”ë§ ì•ˆë¨!
    countRef.current = countRef.current + 1;
    alert('You clicked ' + countRef.current + ' times!');
  }

  return (
    <button onClick={handleClick}>
      Click me!
    </button>
  );
}
```

**ë²„íŠ¼ì„ ì—¬ëŸ¬ ë²ˆ ëˆŒëŸ¬ë„ í™”ë©´ì€ ë³€í•˜ì§€ ì•Šì§€ë§Œ, alertëŠ” ì¦ê°€ëœ ê°’ì„ í‘œì‹œí•©ë‹ˆë‹¤.**

### Vueì™€ ë¹„êµ

```html
<!-- Vue: ref()ëŠ” ë°˜ì‘í˜• -->
<script setup>
import { ref } from 'vue'

const count = ref(0)

function increment() {
  count.value++  // ìë™ ë¦¬ë Œë”ë§!
}
</script>

<template>
  <button @click="increment">{{ count }}</button>
</template>
```

```jsx
// React: useRefëŠ” ë¹„ë°˜ì‘í˜•
import { useRef } from 'react'

function Counter() {
  const countRef = useRef(0)
  
  function increment() {
    countRef.current++  // ë¦¬ë Œë”ë§ ì•ˆë¨!
  }
  
  return <button onClick={increment}>Click</button>
}
```

**ì°¨ì´ì :**

- Vue: `ref()`ëŠ” ë°˜ì‘í˜• (í™”ë©´ ì—…ë°ì´íŠ¸)
- React: `useRef()`ëŠ” ë¹„ë°˜ì‘í˜• (í™”ë©´ ì—…ë°ì´íŠ¸ ì•ˆë¨)

---

## Refë¡œ DOM ì¡°ì‘í•˜ê¸°

### DOM ë…¸ë“œì— ì ‘ê·¼í•˜ê¸°

ReactëŠ” ìë™ìœ¼ë¡œ DOMì„ ì—…ë°ì´íŠ¸í•˜ë¯€ë¡œ ì§ì ‘ ì¡°ì‘í•  ì¼ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” í•„ìš”í•©ë‹ˆë‹¤:

- inputì— í¬ì»¤ìŠ¤
- ìš”ì†Œë¡œ ìŠ¤í¬ë¡¤
- í¬ê¸°ì™€ ìœ„ì¹˜ ì¸¡ì •

```jsx
import { useRef } from 'react';

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

**ë‹¨ê³„:**

1. `useRef`ë¡œ ref ì„ ì–¸
2. JSXì˜ `ref` ì†ì„±ì— ì „ë‹¬
3. Reactê°€ `<input>` DOM ë…¸ë“œë¥¼ `inputRef.current`ì— ì €ì¥

### Ref ì½œë°±ìœ¼ë¡œ ref ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬

```jsx
import { useRef } from 'react';

export default function CatFriends() {
  const itemsRef = useRef(null);

  function scrollToId(itemId) {
    const map = getMap();
    const node = map.get(itemId);
    node.scrollIntoView({
      behavior: 'smooth',
      block: 'nearest',
      inline: 'center'
    });
  }

  function getMap() {
    if (!itemsRef.current) {
      // ì²˜ìŒ ì‚¬ìš© ì‹œ Map ì´ˆê¸°í™”
      itemsRef.current = new Map();
    }
    return itemsRef.current;
  }

  return (
    <>
      <nav>
        <button onClick={() => scrollToId(0)}>
          Tom
        </button>
        <button onClick={() => scrollToId(5)}>
          Maru
        </button>
        <button onClick={() => scrollToId(9)}>
          Jellylorum
        </button>
      </nav>
      <div>
        <ul>
          {catList.map(cat => (
            <li
              key={cat.id}
              ref={(node) => {
                const map = getMap();
                if (node) {
                  map.set(cat.id, node);
                } else {
                  map.delete(cat.id);
                }
              }}
            >
              <img src={cat.imageUrl} alt={cat.name} />
            </li>
          ))}
        </ul>
      </div>
    </>
  );
}

const catList = [];
for (let i = 0; i < 10; i++) {
  catList.push({
    id: i,
    imageUrl: 'https://placekitten.com/250/200?image=' + i
  });
}
```

**Ref ì½œë°±:**

- `ref={(node) => { ... }}`
- Reactê°€ DOM ë…¸ë“œë¥¼ ìƒì„±í•  ë•Œ `node`ë¡œ í˜¸ì¶œ
- DOM ë…¸ë“œê°€ ì œê±°ë  ë•Œ `null`ë¡œ í˜¸ì¶œ

### ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ DOM ë…¸ë“œ ì ‘ê·¼

```jsx
// âŒ ì‘ë™í•˜ì§€ ì•ŠìŒ
function MyInput() {
  return <input />;
}

export default function Form() {
  const inputRef = useRef(null);
  return <MyInput ref={inputRef} />;  // ì—ëŸ¬!
}
```

**í•´ê²°ì±…: `forwardRef` ì‚¬ìš©**

```jsx
import { forwardRef, useRef } from 'react';

const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

### useImperativeHandleë¡œ ë…¸ì¶œë˜ëŠ” ê¸°ëŠ¥ ì œí•œ

```jsx
import { forwardRef, useRef, useImperativeHandle } from 'react';

const MyInput = forwardRef((props, ref) => {
  const realInputRef = useRef(null);
  
  useImperativeHandle(ref, () => ({
    // focusë§Œ ë…¸ì¶œ
    focus() {
      realInputRef.current.focus();
    },
  }));
  
  return <input {...props} ref={realInputRef} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();  // âœ… ê°€ëŠ¥
    // inputRef.current.value = 'Hi';  // âŒ ë¶ˆê°€ëŠ¥ (ë…¸ì¶œ ì•ˆë¨)
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

### Reactê°€ refë¥¼ ì²¨ë¶€í•˜ëŠ” ì‹œì 

**Reactì—ì„œ ëª¨ë“  ì—…ë°ì´íŠ¸ëŠ” ë‘ ë‹¨ê³„ë¡œ ë¶„í• ë©ë‹ˆë‹¤:**

1. **ë Œë”**: Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ í™”ë©´ì— ë¬´ì—‡ì´ ìˆì–´ì•¼ í•˜ëŠ”ì§€ íŒŒì•…
2. **ì»¤ë°‹**: Reactê°€ ë³€ê²½ì‚¬í•­ì„ DOMì— ì ìš©

**Ref ì²¨ë¶€ ì‹œì :**

- **ë Œë” ì¤‘**: `ref.current = null`
- **ì»¤ë°‹ ì „**: Reactê°€ `ref.current`ë¥¼ DOM ë…¸ë“œë¡œ ì„¤ì •

### flushSyncë¡œ state ì—…ë°ì´íŠ¸ ê°•ì œ

```jsx
import { useState, useRef } from 'react';
import { flushSync } from 'react-dom';

export default function TodoList() {
  const listRef = useRef(null);
  const [todos, setTodos] = useState(initialTodos);

  function handleAdd() {
    const newTodo = { id: nextId++, text: text };
    
    flushSync(() => {
      setText('');
      setTodos([...todos, newTodo]);
    });
    
    listRef.current.lastChild.scrollIntoView({
      behavior: 'smooth',
      block: 'nearest'
    });
  }

  return (
    <>
      <button onClick={handleAdd}>Add</button>
      <input value={text} onChange={e => setText(e.target.value)} />
      <ul ref={listRef}>
        {todos.map(todo => (
          <li key={todo.id}>{todo.text}</li>
        ))}
      </ul>
    </>
  );
}

let nextId = 0;
const initialTodos = [];
for (let i = 0; i < 20; i++) {
  initialTodos.push({
    id: nextId++,
    text: 'Todo #' + (i + 1)
  });
}
```

### refë¡œ DOM ì¡°ì‘ ì‹œ ëª¨ë²” ì‚¬ë¡€

**RefëŠ” íƒˆì¶œêµ¬ì…ë‹ˆë‹¤.** "React ë°–ìœ¼ë¡œ ë²—ì–´ë‚˜ì•¼" í•  ë•Œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.

**ì¢‹ì€ ì˜ˆ:**

- í¬ì»¤ìŠ¤ ê´€ë¦¬
- ìŠ¤í¬ë¡¤ ìœ„ì¹˜
- Reactê°€ ë…¸ì¶œí•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì € API í˜¸ì¶œ

**ë‚˜ìœ ì˜ˆ:**

```jsx
// âŒ ë‚˜ì¨: Reactê°€ ê´€ë¦¬í•˜ëŠ” DOM ìˆ˜ì •
const divRef = useRef(null);
divRef.current.remove();  // Reactì™€ ì¶©ëŒ!
divRef.current.appendChild(child);  // Reactê°€ í˜¼ë€ìŠ¤ëŸ¬ì›Œí•¨

// âœ… ì¢‹ìŒ: Reactê°€ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ë§Œ ìˆ˜ì •
divRef.current.scrollIntoView();
divRef.current.focus();
```

### Vueì™€ ë¹„êµ

```html
<!-- Vue: template ref -->
<script setup>
import { ref } from 'vue'

const inputRef = ref(null)

function focus() {
  inputRef.value.focus()
}
</script>

<template>
  <input ref="inputRef" />
  <button @click="focus">Focus</button>
</template>
```

```jsx
// React: useRef + ref ì†ì„±
import { useRef } from 'react'

function Form() {
  const inputRef = useRef(null)
  
  function focus() {
    inputRef.current.focus()
  }
  
  return (
    <>
      <input ref={inputRef} />
      <button onClick={focus}>Focus</button>
    </>
  )
}
```

---

## Effectë¡œ ë™ê¸°í™”í•˜ê¸°

### Effectë€?

ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” **ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”**í•´ì•¼ í•©ë‹ˆë‹¤.

**ì˜ˆì‹œ:**

- Reactê°€ ì•„ë‹Œ ì»´í¬ë„ŒíŠ¸ ì œì–´
- ì„œë²„ ì—°ê²° ì„¤ì •
- ë¶„ì„ ë¡œê·¸ ì „ì†¡

**EffectëŠ” ë Œë”ë§ í›„ì— ì¼ë¶€ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ React ì™¸ë¶€ì˜ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•©ë‹ˆë‹¤.**

### Effect ì‘ì„±í•˜ëŠ” ë°©ë²•

#### 1ë‹¨ê³„: Effect ì„ ì–¸

```jsx
import { useEffect } from 'react';

function MyComponent() {
  useEffect(() => {
    // ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±
  });
  return <div />;
}
```

#### 2ë‹¨ê³„: Effect ì˜ì¡´ì„± ì§€ì •

```jsx
useEffect(() => {
  // ì´ ì½”ë“œëŠ” ëª¨ë“  ë Œë”ë§ í›„ì— ì‹¤í–‰ë¨
});

useEffect(() => {
  // ì´ ì½”ë“œëŠ” ë§ˆìš´íŠ¸ ì‹œì—ë§Œ ì‹¤í–‰ë¨
}, []);

useEffect(() => {
  // ì´ ì½”ë“œëŠ” ë§ˆìš´íŠ¸ ì‹œ + aë‚˜ bê°€ ë³€ê²½ë  ë•Œ ì‹¤í–‰ë¨
}, [a, b]);
```

#### 3ë‹¨ê³„: í•„ìš”í•˜ë©´ í´ë¦°ì—… ì¶”ê°€

```jsx
useEffect(() => {
  const connection = createConnection();
  connection.connect();
  
  return () => {
    connection.disconnect();
  };
}, []);
```

### ì˜ˆì œ: ì±„íŒ… ì—°ê²°

```jsx
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  const [serverUrl, setServerUrl] = useState('https://localhost:1234');
  const [roomId, setRoomId] = useState('general');

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    
    return () => {
      connection.disconnect();
    };
  }, [serverUrl, roomId]);

  return (
    <>
      <label>
        Server URL:{' '}
        <input
          value={serverUrl}
          onChange={e => setServerUrl(e.target.value)}
        />
      </label>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <p>Welcome to the {roomId} room!</p>
    </>
  );
}
```

**ë™ì‘:**

1. ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ â†’ Effect ì‹¤í–‰ â†’ ì—°ê²°
2. `serverUrl` ë˜ëŠ” `roomId` ë³€ê²½ â†’ í´ë¦°ì—… ì‹¤í–‰ (ì—°ê²° í•´ì œ) â†’ Effect ì¬ì‹¤í–‰ (ìƒˆ ì—°ê²°)
3. ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ â†’ í´ë¦°ì—… ì‹¤í–‰ (ì—°ê²° í•´ì œ)

### ê°œë°œ ëª¨ë“œì—ì„œ Effectê°€ ë‘ ë²ˆ ì‹¤í–‰ë˜ëŠ” ì´ìœ 

**Strict Mode**ì—ì„œ ReactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ **ë‘ ë²ˆ** ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤:

```
ë§ˆìš´íŠ¸ â†’ í´ë¦°ì—… â†’ ì¬ë§ˆìš´íŠ¸
```

**ì´ìœ :** í´ë¦°ì—… ë¡œì§ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸

```jsx
useEffect(() => {
  console.log('âœ… ì—°ê²° ì¤‘...');
  const connection = createConnection();
  connection.connect();
  
  return () => {
    console.log('âŒ ì—°ê²° í•´ì œ ì¤‘...');
    connection.disconnect();
  };
}, []);
```

**ì½˜ì†” ì¶œë ¥ (ê°œë°œ ëª¨ë“œ):**

```
âœ… ì—°ê²° ì¤‘...
âŒ ì—°ê²° í•´ì œ ì¤‘...
âœ… ì—°ê²° ì¤‘...
```

**í”„ë¡œë•ì…˜ì—ì„œëŠ” í•œ ë²ˆë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.**

### Effectê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš°

**ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš° Effectê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤:**

#### 1. **ë Œë”ë§ì„ ìœ„í•œ ë°ì´í„° ë³€í™˜**

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ê³„ì‚°
const [firstName, setFirstName] = useState('');
const [lastName, setLastName] = useState('');
const [fullName, setFullName] = useState('');

useEffect(() => {
  setFullName(firstName + ' ' + lastName);
}, [firstName, lastName]);

// âœ… ì¢‹ìŒ: ë Œë”ë§ ì¤‘ ê³„ì‚°
const [firstName, setFirstName] = useState('');
const [lastName, setLastName] = useState('');
const fullName = firstName + ' ' + lastName;
```

#### 2. **ì‚¬ìš©ì ì´ë²¤íŠ¸ ì²˜ë¦¬**

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ì²˜ë¦¬
useEffect(() => {
  if (isSubmitted) {
    post('/api/register', { email });
  }
}, [isSubmitted, email]);

// âœ… ì¢‹ìŒ: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬
function handleSubmit() {
  post('/api/register', { email });
}
```

### Vueì™€ ë¹„êµ

```html
<!-- Vue: onMounted, onUnmounted -->
<script setup>
import { onMounted, onUnmounted } from 'vue'

onMounted(() => {
  const connection = createConnection()
  connection.connect()
  
  onUnmounted(() => {
    connection.disconnect()
  })
})
</script>
```

```jsx
// React: useEffect
import { useEffect } from 'react'

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection()
    connection.connect()
    
    return () => {
      connection.disconnect()
    }
  }, [])
}
```

**ì°¨ì´ì :**

- Vue: `onMounted`, `onUnmounted` ë¶„ë¦¬
- React: `useEffect`ì—ì„œ í´ë¦°ì—… í•¨ìˆ˜ ë°˜í™˜

---

## Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤

EffectëŠ” React ì½”ë“œì—ì„œ "ë²—ì–´ë‚˜" ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. **Effectë¥¼ ë‚¨ìš©í•˜ì§€ ë§ˆì„¸ìš”!**

### ë¶ˆí•„ìš”í•œ Effect ì œê±°í•˜ê¸°

#### 1. **ë Œë”ë§ì„ ìœ„í•œ ë°ì´í„° ë³€í™˜ì— Effect ë¶ˆí•„ìš”**

```jsx
// âŒ ë¶ˆí•„ìš”í•œ Effect
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  const [fullName, setFullName] = useState('');

  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  // ...
}

// âœ… ë Œë”ë§ ì¤‘ ê³„ì‚°
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  const fullName = firstName + ' ' + lastName;
  // ...
}
```

#### 2. **ë¹„ì‹¼ ê³„ì‚° ìºì‹±ì—ëŠ” useMemo**

```jsx
// âŒ ëŠë¦¼: ë§¤ ë Œë”ë§ë§ˆë‹¤ ì¬ê³„ì‚°
function TodoList({ todos, filter }) {
  const visibleTodos = getFilteredTodos(todos, filter);  // ëŠë¦° í•¨ìˆ˜
  // ...
}

// âœ… ë¹ ë¦„: todosë‚˜ filterê°€ ë³€ê²½ë  ë•Œë§Œ ì¬ê³„ì‚°
import { useMemo } from 'react';

function TodoList({ todos, filter }) {
  const visibleTodos = useMemo(() => {
    return getFilteredTodos(todos, filter);
  }, [todos, filter]);
  // ...
}
```

#### 3. **Props ë³€ê²½ ì‹œ ëª¨ë“  state ì¬ì„¤ì •**

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ì¬ì„¤ì •
export default function ProfilePage({ userId }) {
  const [comment, setComment] = useState('');

  useEffect(() => {
    setComment('');
  }, [userId]);
  // ...
}

// âœ… ì¢‹ìŒ: keyë¡œ ì¬ì„¤ì •
export default function ProfilePage({ userId }) {
  return (
    <Profile
      userId={userId}
      key={userId}
    />
  );
}

function Profile({ userId }) {
  const [comment, setComment] = useState('');
  // userIdê°€ ë³€ê²½ë˜ë©´ Profileì´ ì¬ë§ˆìš´íŠ¸ë˜ì–´ commentê°€ ''ë¡œ ë¦¬ì…‹ë¨
  // ...
}
```

#### 4. **Props ë³€ê²½ ì‹œ ì¼ë¶€ state ì¡°ì •**

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ë™ê¸°í™”
function List({ items }) {
  const [selection, setSelection] = useState(null);

  useEffect(() => {
    setSelection(null);
  }, [items]);
  // ...
}

// âœ… ì¢‹ìŒ: ë Œë”ë§ ì¤‘ ì¡°ì •
function List({ items }) {
  const [selectedId, setSelectedId] = useState(null);
  const [prevItems, setPrevItems] = useState(items);
  
  if (items !== prevItems) {
    setPrevItems(items);
    setSelectedId(null);
  }
  // ...
}

// âœ… ë” ì¢‹ìŒ: ëª¨ë“  ê²ƒì„ ë Œë”ë§ ì¤‘ ê³„ì‚°
function List({ items }) {
  const [selectedId, setSelectedId] = useState(null);
  const selection = items.find(item => item.id === selectedId) ?? null;
  // ...
}
```

#### 5. **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê°„ ë¡œì§ ê³µìœ **

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ì²˜ë¦¬
function ProductPage({ product, addToCart }) {
  useEffect(() => {
    if (product.isInCart) {
      showNotification(`Added ${product.name} to the shopping cart!`);
    }
  }, [product]);

  function handleBuyClick() {
    addToCart(product);
  }

  function handleCheckoutClick() {
    addToCart(product);
    navigateTo('/checkout');
  }
  // ...
}

// âœ… ì¢‹ìŒ: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ í˜¸ì¶œ
function ProductPage({ product, addToCart }) {
  function buyProduct() {
    addToCart(product);
    showNotification(`Added ${product.name} to the shopping cart!`);
  }

  function handleBuyClick() {
    buyProduct();
  }

  function handleCheckoutClick() {
    buyProduct();
    navigateTo('/checkout');
  }
  // ...
}
```

#### 6. **POST ìš”ì²­ ë³´ë‚´ê¸°**

```jsx
// âŒ ë‚˜ì¨: ë Œë”ë§ ì‹œë§ˆë‹¤ ì „ì†¡
function Form() {
  const [firstName, setFirstName] = useState('');
  const [lastName, setLastName] = useState('');

  useEffect(() => {
    post('/analytics/event', { eventName: 'visit_form' });
  }, []);

  useEffect(() => {
    post('/analytics/event', { eventName: 'edit_form' });
  }, [firstName, lastName]);

  function handleSubmit(e) {
    e.preventDefault();
    post('/api/register', { firstName, lastName });
  }
  // ...
}

// âœ… ì¢‹ìŒ: ì ì ˆí•œ ì‹œì ì— ì „ì†¡
function Form() {
  const [firstName, setFirstName] = useState('');
  const [lastName, setLastName] = useState('');

  useEffect(() => {
    post('/analytics/event', { eventName: 'visit_form' });
  }, []);

  function handleSubmit(e) {
    e.preventDefault();
    post('/api/register', { firstName, lastName });
    post('/analytics/event', { eventName: 'submit_form' });
  }

  function handleChange(e) {
    setFirstName(e.target.value);
    post('/analytics/event', { eventName: 'edit_form' });
  }
  // ...
}
```

#### 7. **ì—°ì‡„ ê³„ì‚°**

```jsx
// âŒ ë‚˜ì¨: ì—°ì‡„ Effect
function Game() {
  const [card, setCard] = useState(null);
  const [goldCardCount, setGoldCardCount] = useState(0);
  const [round, setRound] = useState(1);
  const [isGameOver, setIsGameOver] = useState(false);

  useEffect(() => {
    if (card !== null && card.gold) {
      setGoldCardCount(c => c + 1);
    }
  }, [card]);

  useEffect(() => {
    if (goldCardCount > 3) {
      setRound(r => r + 1);
      setGoldCardCount(0);
    }
  }, [goldCardCount]);

  useEffect(() => {
    if (round > 5) {
      setIsGameOver(true);
    }
  }, [round]);

  useEffect(() => {
    alert('Good game!');
  }, [isGameOver]);
  // ...
}

// âœ… ì¢‹ìŒ: ë Œë”ë§ ì¤‘ ê³„ì‚° ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬
function Game() {
  const [card, setCard] = useState(null);
  const [goldCardCount, setGoldCardCount] = useState(0);
  const [round, setRound] = useState(1);

  const isGameOver = round > 5;

  function handlePlaceCard(nextCard) {
    if (isGameOver) {
      throw Error('Game already ended.');
    }

    setCard(nextCard);
    if (nextCard.gold) {
      if (goldCardCount <= 3) {
        setGoldCardCount(goldCardCount + 1);
      } else {
        setGoldCardCount(0);
        setRound(round + 1);
        if (round === 5) {
          alert('Good game!');
        }
      }
    }
  }
  // ...
}
```

#### 8. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”**

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ì´ˆê¸°í™” (ë‘ ë²ˆ ì‹¤í–‰ë  ìˆ˜ ìˆìŒ)
function App() {
  useEffect(() => {
    loadDataFromLocalStorage();
    checkAuthToken();
  }, []);
  // ...
}

// âœ… ì¢‹ìŒ: ìµœìƒìœ„ì—ì„œ í•œ ë²ˆë§Œ ì‹¤í–‰
if (typeof window !== 'undefined') {
  loadDataFromLocalStorage();
  checkAuthToken();
}

function App() {
  // ...
}
```

#### 9. **ë¶€ëª¨ì—ê²Œ state ë³€ê²½ ì•Œë¦¬ê¸°**

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ë¶€ëª¨ì—ê²Œ ì•Œë¦¼
function Toggle({ onChange }) {
  const [isOn, setIsOn] = useState(false);

  useEffect(() => {
    onChange(isOn);
  }, [isOn, onChange]);

  function handleClick() {
    setIsOn(!isOn);
  }
  // ...
}

// âœ… ì¢‹ìŒ: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ í•¨ê»˜ ì²˜ë¦¬
function Toggle({ onChange }) {
  const [isOn, setIsOn] = useState(false);

  function handleClick() {
    const nextIsOn = !isOn;
    setIsOn(nextIsOn);
    onChange(nextIsOn);
  }
  // ...
}
```

#### 10. **ë¶€ëª¨ì—ê²Œ ë°ì´í„° ì „ë‹¬**

```jsx
// âŒ ë‚˜ì¨: Effectë¡œ ì „ë‹¬
function Parent() {
  const [data, setData] = useState(null);
  return <Child onFetched={setData} />;
}

function Child({ onFetched }) {
  const data = useSomeAPI();
  
  useEffect(() => {
    if (data) {
      onFetched(data);
    }
  }, [onFetched, data]);
  // ...
}

// âœ… ì¢‹ìŒ: ë¶€ëª¨ê°€ ë°ì´í„° í˜ì¹­
function Parent() {
  const data = useSomeAPI();
  return <Child data={data} />;
}

function Child({ data }) {
  // ...
}
```

### Effectë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°

**ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ë•Œë§Œ ì‚¬ìš©í•˜ì„¸ìš”:**

- ë¸Œë¼ìš°ì € API (íƒ€ì´ë¨¸, ë„¤íŠ¸ì›Œí¬ ë“±)
- ì„œë“œíŒŒí‹° ìœ„ì ¯
- ë„¤íŠ¸ì›Œí¬ ì—°ê²°
- ë¸Œë¼ìš°ì € DOM (í¬ì»¤ìŠ¤, ìŠ¤í¬ë¡¤ ë“±)

---

## ë°˜ì‘í˜• Effectì˜ ìƒëª…ì£¼ê¸°

### Effectì˜ ìƒëª…ì£¼ê¸°ëŠ” ì»´í¬ë„ŒíŠ¸ì™€ ë‹¤ë¦…ë‹ˆë‹¤

**ì»´í¬ë„ŒíŠ¸:**

- ë§ˆìš´íŠ¸ (Mount)
- ì—…ë°ì´íŠ¸ (Update)
- ì–¸ë§ˆìš´íŠ¸ (Unmount)

**Effect:**

- ë™ê¸°í™” ì‹œì‘ (Start synchronizing)
- ë™ê¸°í™” ì¤‘ì§€ (Stop synchronizing)

### ì˜ˆì œ: ì±„íŒ…ë°©

```jsx
const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to {roomId}!</h1>;
}
```

**ìƒëª…ì£¼ê¸°:**

1. `roomId = "general"`ë¡œ ë§ˆìš´íŠ¸
   - Effect: `general` ë°©ì— ì—°ê²°

2. `roomId = "travel"`ë¡œ ì—…ë°ì´íŠ¸
   - Effect í´ë¦°ì—…: `general` ë°© ì—°ê²° í•´ì œ
   - Effect: `travel` ë°©ì— ì—°ê²°

3. ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸
   - Effect í´ë¦°ì—…: `travel` ë°© ì—°ê²° í•´ì œ

### ì˜ì¡´ì„± ë°°ì—´ì˜ ì¤‘ìš”ì„±

```jsx
// âŒ ê²½ê³ : roomIdê°€ ì˜ì¡´ì„±ì— ì—†ìŒ
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, []); // ğŸ”´ React Hook useEffect has a missing dependency: 'roomId'

// âœ… ì˜¬ë°”ë¦„
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, [roomId]);
```

### ê° EffectëŠ” ë…ë¦½ì ì¸ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤

```jsx
// âŒ ë‚˜ì¨: ê´€ë ¨ ì—†ëŠ” ë¡œì§ì„ í•˜ë‚˜ì˜ Effectì—
function ChatRoom({ roomId }) {
  useEffect(() => {
    logVisit(roomId);
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);
  // ...
}

// âœ… ì¢‹ìŒ: ê° ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ë³„ë„ Effectë¡œ
function ChatRoom({ roomId }) {
  useEffect(() => {
    logVisit(roomId);
  }, [roomId]);

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);
  // ...
}
```

### EffectëŠ” ë°˜ì‘í˜• ê°’ì— "ë°˜ì‘"í•©ë‹ˆë‹¤

```jsx
function ChatRoom({ roomId, serverUrl }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]);
  // ...
}
```

**ë°˜ì‘í˜• ê°’:**

- Props
- State
- ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ì— ì§ì ‘ ì„ ì–¸ëœ ë³€ìˆ˜ì™€ í•¨ìˆ˜

**ë¹„ë°˜ì‘í˜• ê°’:**

- ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì˜ ê°’
- `ref.current` (ì˜ë„ì ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥)

### ë¹ˆ ì˜ì¡´ì„± ë°°ì—´ `[]`

```jsx
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, []); // ë§ˆìš´íŠ¸ ì‹œì—ë§Œ ì‹¤í–‰
```

**ì˜ë¯¸:** "ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰"

âš ï¸ **ì£¼ì˜:** ë°˜ì‘í˜• ê°’ì„ ì‚¬ìš©í•˜ëŠ”ë° ì˜ì¡´ì„±ì— ì—†ìœ¼ë©´ ë²„ê·¸ ë°œìƒ!

---

## Effectì—ì„œ ì´ë²¤íŠ¸ ë¶„ë¦¬í•˜ê¸°

### ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ vs Effect

**ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬:**

- íŠ¹ì • ìƒí˜¸ì‘ìš©ì— ì‘ë‹µ
- ìˆ˜ë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°

**Effect:**

- ë™ê¸°í™”ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ ì‹¤í–‰
- ìë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°

### ë¬¸ì œ: Effectê°€ ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë¨

```jsx
function ChatRoom({ roomId, theme }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, theme]);  // theme ë³€ê²½ ì‹œì—ë„ ì¬ì—°ê²°! ğŸ˜±
  // ...
}
```

### í•´ê²°: useEffectEvent (ì‹¤í—˜ì )

```jsx
import { useEffect, useEffectEvent } from 'react';

function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      onConnected();
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);  // themeì€ ì˜ì¡´ì„± ì•„ë‹˜!
  // ...
}
```

**`useEffectEvent`:**

- Effectì—ì„œ ë¹„ë°˜ì‘í˜• ë¡œì§ ì¶”ì¶œ
- í•­ìƒ ìµœì‹  propsì™€ state ì‚¬ìš©
- ì˜ì¡´ì„±ì— í¬í•¨í•˜ì§€ ì•ŠìŒ

### Effect Event ì œí•œì‚¬í•­

- **Effect ë‚´ë¶€ì—ì„œë§Œ í˜¸ì¶œ**
- **ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë‚˜ Hookì— ì „ë‹¬ ê¸ˆì§€**

```jsx
// âŒ ì˜ëª»ë¨
function Timer() {
  const [count, setCount] = useState(0);

  const onTick = useEffectEvent(() => {
    setCount(count + 1);
  });

  useTimer(() => {
    onTick();  // ë‹¤ë¥¸ Hookì—ì„œ í˜¸ì¶œ ë¶ˆê°€!
  }, 1000);
  // ...
}

// âœ… ì˜¬ë°”ë¦„
function Timer() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const onTick = () => {
      setCount(count + 1);
    };

    const id = setInterval(onTick, 1000);
    return () => clearInterval(id);
  }, [count]);
  // ...
}
```

---

## Effect ì˜ì¡´ì„± ì œê±°í•˜ê¸°

### ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì œê±°

#### 1. **ê°ì²´ ì˜ì¡´ì„±**

```jsx
// âŒ ë‚˜ì¨: ê°ì²´ëŠ” ë§¤ ë Œë”ë§ë§ˆë‹¤ ì¬ìƒì„±
function ChatRoom({ options }) {
  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [options]);  // ë§¤ ë Œë”ë§ë§ˆë‹¤ ì¬ì—°ê²°!
}

function App() {
  const [isDark, setIsDark] = useState(false);
  const options = { serverUrl: 'https://localhost:1234', roomId: 'music' };
  return <ChatRoom options={options} />;
}

// âœ… ì¢‹ìŒ: í•„ìš”í•œ ê°’ë§Œ ì˜ì¡´ì„±ìœ¼ë¡œ
function ChatRoom({ options }) {
  const { serverUrl, roomId } = options;
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [serverUrl, roomId]);
}
```

#### 2. **í•¨ìˆ˜ ì˜ì¡´ì„±**

```jsx
// âŒ ë‚˜ì¨: í•¨ìˆ˜ëŠ” ë§¤ ë Œë”ë§ë§ˆë‹¤ ì¬ìƒì„±
function ChatRoom({ getOptions }) {
  useEffect(() => {
    const options = getOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [getOptions]);  // ë§¤ ë Œë”ë§ë§ˆë‹¤ ì¬ì—°ê²°!
}

// âœ… ì¢‹ìŒ: í•¨ìˆ˜ë¥¼ Effect ì•ˆìœ¼ë¡œ
function ChatRoom({ roomId }) {
  useEffect(() => {
    function getOptions() {
      return { serverUrl: 'https://localhost:1234', roomId };
    }
    
    const options = getOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);
}
```

#### 3. **ë™ì  ê°ì²´/í•¨ìˆ˜ ìƒì„±**

```jsx
// âŒ ë‚˜ì¨
function ChatRoom({ roomId }) {
  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]);
}

// âœ… ì¢‹ìŒ
function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);  // serverUrlì€ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì˜ ìƒìˆ˜
}

const serverUrl = 'https://localhost:1234';
```

### Stateë¡œë¶€í„° ë‹¤ìŒ state ê³„ì‚°

```jsx
// âŒ ë‚˜ì¨: messagesê°€ ì˜ì¡´ì„±
function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    const connection = createConnection();
    connection.on('message', (receivedMessage) => {
      setMessages([...messages, receivedMessage]);
    });
    return () => connection.disconnect();
  }, [roomId, messages]);  // messages ë³€ê²½ ì‹œë§ˆë‹¤ ì¬ì—°ê²°!
}

// âœ… ì¢‹ìŒ: ì—…ë°ì´í„° í•¨ìˆ˜ ì‚¬ìš©
function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    const connection = createConnection();
    connection.on('message', (receivedMessage) => {
      setMessages(msgs => [...msgs, receivedMessage]);
    });
    return () => connection.disconnect();
  }, [roomId]);  // messagesëŠ” ì˜ì¡´ì„± ì•„ë‹˜!
}
```

### ê°’ì„ ì½ë˜ "ë°˜ì‘"í•˜ê³  ì‹¶ì§€ ì•Šì„ ë•Œ

```jsx
// âŒ ë‚˜ì¨: theme ë³€ê²½ ì‹œ ì¬ì—°ê²°
function ChatRoom({ roomId, theme }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, theme]);
}

// âœ… ì¢‹ìŒ: Effect Event ì‚¬ìš©
function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', onConnected);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);
}
```

---

## ì»¤ìŠ¤í…€ Hookìœ¼ë¡œ ë¡œì§ ì¬ì‚¬ìš©í•˜ê¸°

### ì»¤ìŠ¤í…€ Hookì´ë€?

**ì»¤ìŠ¤í…€ Hook**ì€ ì»´í¬ë„ŒíŠ¸ ë¡œì§ì„ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œ ê²ƒì…ë‹ˆë‹¤.

**ëª…ëª… ê·œì¹™:** `use`ë¡œ ì‹œì‘

```jsx
function useOnlineStatus() {
  const [isOnline, setIsOnline] = useState(true);
  
  useEffect(() => {
    function handleOnline() {
      setIsOnline(true);
    }
    function handleOffline() {
      setIsOnline(false);
    }
    
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);
    
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);
  
  return isOnline;
}
```

### ì»¤ìŠ¤í…€ Hook ì‚¬ìš©

```jsx
function StatusBar() {
  const isOnline = useOnlineStatus();
  return <h1>{isOnline ? 'âœ… Online' : 'âŒ Disconnected'}</h1>;
}

function SaveButton() {
  const isOnline = useOnlineStatus();

  function handleSaveClick() {
    console.log('âœ… Progress saved');
  }

  return (
    <button disabled={!isOnline} onClick={handleSaveClick}>
      {isOnline ? 'Save progress' : 'Reconnecting...'}
    </button>
  );
}
```

### ì»¤ìŠ¤í…€ Hookì€ stateë¥¼ ê³µìœ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

```jsx
// ê° ì»´í¬ë„ŒíŠ¸ëŠ” ë…ë¦½ì ì¸ isOnline stateë¥¼ ê°€ì§
function StatusBar() {
  const isOnline = useOnlineStatus();  // ë…ë¦½ì 
  // ...
}

function SaveButton() {
  const isOnline = useOnlineStatus();  // ë…ë¦½ì 
  // ...
}
```

### ì»¤ìŠ¤í…€ Hook ì˜ˆì œ ëª¨ìŒ

#### 1. **useLocalStorage**

```jsx
import { useState, useEffect } from 'react';

function useLocalStorage(key, initialValue) {
  const [value, setValue] = useState(() => {
    const saved = localStorage.getItem(key);
    return saved !== null ? JSON.parse(saved) : initialValue;
  });

  useEffect(() => {
    localStorage.setItem(key, JSON.stringify(value));
  }, [key, value]);

  return [value, setValue];
}

// ì‚¬ìš©
function App() {
  const [name, setName] = useLocalStorage('name', '');
  
  return (
    <input
      value={name}
      onChange={e => setName(e.target.value)}
    />
  );
}
```

#### 2. **useWindowSize**

```jsx
import { useState, useEffect } from 'react';

function useWindowSize() {
  const [size, setSize] = useState({
    width: window.innerWidth,
    height: window.innerHeight,
  });

  useEffect(() => {
    function handleResize() {
      setSize({
        width: window.innerWidth,
        height: window.innerHeight,
      });
    }

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return size;
}

// ì‚¬ìš©
function App() {
  const { width, height } = useWindowSize();
  return <p>Window size: {width} x {height}</p>;
}
```

#### 3. **useFetch**

```jsx
import { useState, useEffect } from 'react';

function useFetch(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    setLoading(true);
    setError(null);

    fetch(url)
      .then(response => response.json())
      .then(data => {
        setData(data);
        setLoading(false);
      })
      .catch(error => {
        setError(error);
        setLoading(false);
      });
  }, [url]);

  return { data, loading, error };
}

// ì‚¬ìš©
function UserProfile({ userId }) {
  const { data, loading, error } = useFetch(`/api/users/${userId}`);

  if (loading) return <p>Loading...</p>;
  if (error) return <p>Error: {error.message}</p>;
  return <h1>{data.name}</h1>;
}
```

#### 4. **useDebounce**

```jsx
import { useState, useEffect } from 'react';

function useDebounce(value, delay) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}

// ì‚¬ìš©
function SearchBar() {
  const [searchTerm, setSearchTerm] = useState('');
  const debouncedSearchTerm = useDebounce(searchTerm, 500);

  useEffect(() => {
    if (debouncedSearchTerm) {
      // API í˜¸ì¶œ
      searchAPI(debouncedSearchTerm);
    }
  }, [debouncedSearchTerm]);

  return (
    <input
      value={searchTerm}
      onChange={e => setSearchTerm(e.target.value)}
    />
  );
}
```

#### 5. **usePrevious**

```jsx
import { useRef, useEffect } from 'react';

function usePrevious(value) {
  const ref = useRef();
  
  useEffect(() => {
    ref.current = value;
  }, [value]);
  
  return ref.current;
}

// ì‚¬ìš©
function Counter() {
  const [count, setCount] = useState(0);
  const prevCount = usePrevious(count);

  return (
    <div>
      <h1>Now: {count}, before: {prevCount}</h1>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}
```

#### 6. **useInterval**

```jsx
import { useEffect, useRef } from 'react';

function useInterval(callback, delay) {
  const savedCallback = useRef();

  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

  useEffect(() => {
    function tick() {
      savedCallback.current();
    }
    
    if (delay !== null) {
      const id = setInterval(tick, delay);
      return () => clearInterval(id);
    }
  }, [delay]);
}

// ì‚¬ìš©
function Counter() {
  const [count, setCount] = useState(0);

  useInterval(() => {
    setCount(count + 1);
  }, 1000);

  return <h1>{count}</h1>;
}
```

### ì»¤ìŠ¤í…€ Hook ì‘ì„± ëª¨ë²” ì‚¬ë¡€

#### 1. **ì´ë¦„ì€ `use`ë¡œ ì‹œì‘**

```jsx
// âœ… ì¢‹ìŒ
function useOnlineStatus() { }
function useFormInput() { }
function useFetch() { }

// âŒ ë‚˜ì¨
function getOnlineStatus() { }
function formInput() { }
```

#### 2. **ë†’ì€ ìˆ˜ì¤€ì˜ ì‚¬ìš© ì‚¬ë¡€ì— ì§‘ì¤‘**

```jsx
// âŒ ë‚˜ì¨: ë„ˆë¬´ ì¼ë°˜ì 
function useEffect2(fn, deps) {
  // ...
}

// âœ… ì¢‹ìŒ: êµ¬ì²´ì ì¸ ëª©ì 
function useChatRoom({ serverUrl, roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [serverUrl, roomId]);
}
```

#### 3. **Hookì€ ìˆœìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤**

```jsx
// âœ… ì¢‹ìŒ: ìˆœìˆ˜ í•¨ìˆ˜
function useFormInput(initialValue) {
  const [value, setValue] = useState(initialValue);
  
  function handleChange(e) {
    setValue(e.target.value);
  }
  
  return {
    value,
    onChange: handleChange
  };
}

// âŒ ë‚˜ì¨: ë¶€ì‘ìš©
function useFormInput(initialValue) {
  console.log('Rendering!');  // ìˆœìˆ˜í•˜ì§€ ì•ŠìŒ
  const [value, setValue] = useState(initialValue);
  return { value, setValue };
}
```

#### 4. **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ Hookìœ¼ë¡œ ì¶”ì¶œí•˜ì§€ ë§ˆì„¸ìš”**

```jsx
// âŒ ë‚˜ì¨
function useSubmit(onSubmit) {
  return (e) => {
    e.preventDefault();
    onSubmit();
  };
}

// âœ… ì¢‹ìŒ: ì¼ë°˜ í•¨ìˆ˜ë¡œ
function handleSubmit(e, onSubmit) {
  e.preventDefault();
  onSubmit();
}
```

### Vueì™€ ë¹„êµ

```javascript
// Vue: Composables (ì»¤ìŠ¤í…€ Hookê³¼ ìœ ì‚¬)
import { ref, onMounted, onUnmounted } from 'vue'

export function useOnlineStatus() {
  const isOnline = ref(true)

  function handleOnline() {
    isOnline.value = true
  }

  function handleOffline() {
    isOnline.value = false
  }

  onMounted(() => {
    window.addEventListener('online', handleOnline)
    window.addEventListener('offline', handleOffline)
  })

  onUnmounted(() => {
    window.removeEventListener('online', handleOnline)
    window.removeEventListener('offline', handleOffline)
  })

  return { isOnline }
}
```

---

## ë‹¤ìŒ ë‹¨ê³„

### ì´ ì±•í„°ì—ì„œ ë°°ìš´ ë‚´ìš© ìš”ì•½

âœ… **useRef**: ë¦¬ë Œë”ë§ ì—†ì´ ê°’ ê¸°ì–µ  
âœ… **DOM Ref**: DOM ë…¸ë“œì— ì ‘ê·¼  
âœ… **useEffect**: ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”  
âœ… **Effect ìµœì í™”**: ë¶ˆí•„ìš”í•œ Effect ì œê±°  
âœ… **Effect ìƒëª…ì£¼ê¸°**: ë™ê¸°í™” ì‹œì‘/ì¤‘ì§€  
âœ… **Effect Event**: ë¹„ë°˜ì‘í˜• ë¡œì§ ë¶„ë¦¬  
âœ… **ì˜ì¡´ì„± ì œê±°**: Effect ìµœì í™”  
âœ… **ì»¤ìŠ¤í…€ Hook**: ë¡œì§ ì¬ì‚¬ìš©

### ì—°ìŠµ ë¬¸ì œ

#### 1. íƒ€ì´ë¨¸ êµ¬í˜„

```jsx
// TODO: useInterval ì»¤ìŠ¤í…€ Hook ì‚¬ìš©í•˜ì—¬ íƒ€ì´ë¨¸ êµ¬í˜„
// - ì‹œì‘/ì •ì§€/ë¦¬ì…‹ ê¸°ëŠ¥
// - ë¶„:ì´ˆ í˜•ì‹ìœ¼ë¡œ í‘œì‹œ
import { useState } from 'react';
import { useInterval } from './useInterval';

export default function Timer() {
  // ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±
}
```

#### 2. ë¬´í•œ ìŠ¤í¬ë¡¤

```jsx
// TODO: useIntersectionObserver ì»¤ìŠ¤í…€ Hook êµ¬í˜„
// - ìŠ¤í¬ë¡¤ ëì— ë„ë‹¬í•˜ë©´ ë” ë§ì€ ë°ì´í„° ë¡œë“œ
// - ë¡œë”© ì¸ë””ì¼€ì´í„° í‘œì‹œ
```

#### 3. í¼ ê²€ì¦

```jsx
// TODO: useFormValidation ì»¤ìŠ¤í…€ Hook êµ¬í˜„
// - ì‹¤ì‹œê°„ ê²€ì¦
// - ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
// - ì œì¶œ ê°€ëŠ¥ ì—¬ë¶€ ì²´í¬
```

### ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰

React ê³µì‹ ë¬¸ì„œì˜ **Learn React** ì„¹ì…˜ì„ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!

**ë‹¤ìŒ í•™ìŠµ ë‹¨ê³„:**

1. **API Reference**: Hookê³¼ ì»´í¬ë„ŒíŠ¸ API ìƒì„¸ í•™ìŠµ
2. **ì‹¤ì „ í”„ë¡œì íŠ¸**: ë°°ìš´ ë‚´ìš©ì„ í™œìš©í•œ í”„ë¡œì íŠ¸ êµ¬ì¶•
3. **ê³ ê¸‰ íŒ¨í„´**: Suspense, Concurrent Rendering ë“±
4. **ë¼ì´ë¸ŒëŸ¬ë¦¬**: React Router, React Query, Zustand ë“±

---

## ì°¸ê³  ìë£Œ

- [React ê³µì‹ ë¬¸ì„œ - Escape Hatches](https://react.dev/learn/escape-hatches)
- [React ê³µì‹ ë¬¸ì„œ - API Reference](https://react.dev/reference/react)
- [useEffect Hook](https://react.dev/reference/react/useEffect)
- [useRef Hook](https://react.dev/reference/react/useRef)
- [ì»¤ìŠ¤í…€ Hook](https://react.dev/learn/reusing-logic-with-custom-hooks)

---

**ì‘ì„±ì¼**: 2025-10-11  
**ì¶œì²˜**: [React Official Documentation](https://react.dev/learn/escape-hatches)  
**ëŒ€ìƒ**: React ì¤‘ê¸‰-ê³ ê¸‰ í•™ìŠµì

---

## í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] useRefë¥¼ ì ì ˆíˆ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
- [ ] DOM Refë¡œ ìš”ì†Œë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤
- [ ] useEffectë¥¼ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
- [ ] ë¶ˆí•„ìš”í•œ Effectë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤
- [ ] Effect ì˜ì¡´ì„±ì„ ì˜¬ë°”ë¥´ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤
- [ ] Effect Eventë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
- [ ] ì»¤ìŠ¤í…€ Hookì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤
- [ ] ë¡œì§ì„ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤

ëª¨ë“  í•­ëª©ì„ ì²´í¬í–ˆë‹¤ë©´ React ë§ˆìŠ¤í„°ì…ë‹ˆë‹¤! ğŸš€
